<!DOCTYPE html>
<html lang="cn">







<head>
  <title>Connecting to an Elasticsearch cluster - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com https://ajax.googleapis.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />

  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/guides/elasticsearch" />
  <meta property="og:title" content="Connecting to an Elasticsearch cluster" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/elasticsearch">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/guides/elasticsearch" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/guides/elasticsearch" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/guides/elasticsearch" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/guides/elasticsearch" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/guides/elasticsearch" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  


<div class="grid-wrapper communitysite">
  <div class="grid__item width-12-12">The <a href="https://quarkus.io/guides/elasticsearch">English version of quarkus.io</a> is the official project site. Translated sites are community supported on a best-effort basis.</div>
</div>


  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">QUARKUS是什么？</a></li>
          <li><a href="/developer-joy" class="">开发者的乐趣 </a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES 原生</a></li>
          <li><a href="/standards" class="">标准</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">容器优先 </a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">入门</a></li>
          <li><a href="/guides" class="active" >指南</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP视频</a></li>          
          <li><a href="/books" class="">书籍</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
<li><a href="https://quarkus.io/extensions/" class="">浏览扩展</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">使用扩展</a></li>
          <li><a href="/guides/writing-extensions" class="" >创建扩展</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">支持</a></li>
          <li><a href="/blog" class="" >博客</a></li>
          <li><a href="/discussion" class="">讨论</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="" >播客</a></li>
          <li><a href="/events" class="">活动</a></li>
          <li><a href="/newsletter" class="">新闻</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">路线图</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary
white">开始编码</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/guides/elasticsearch" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/guides/elasticsearch">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/guides/elasticsearch">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/guides/elasticsearch">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/guides/elasticsearch">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas
fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    





<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/guides/">返回指南目录</a>
    </div>
    <div class="flexlabel">
      <label>选择指南版本</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" selected>3.32.1 - Latest</option>
        
        
        
        <option value="3.27" >3.27</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" >3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      <h1 class="text-caps">Connecting to an Elasticsearch cluster </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Elasticsearch is a well known full text search engine and NoSQL datastore.</p>
</div>
<div class="paragraph">
<p>In this guide, we will see how you can get your REST services to interact with an Elasticsearch cluster.</p>
</div>
<div class="paragraph">
<p>Quarkus provides two ways of accessing Elasticsearch:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The lower level REST Client</p>
</li>
<li>
<p>The Elasticsearch Java client</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A third Quarkus extension for the "high level REST Client" used to exist,
but was removed as this client has been deprecated by Elastic and has some licensing issues.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>先决条件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>完成这个指南，你需要:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>大概15分钟</p>
</li>
<li>
<p>编辑器</p>
</li>
<li>
<p>JDK 17+ installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
<li>
<p>Apache Maven 3.9.12</p>
</li>
<li>
<p>如果你愿意的话，还可以选择使用<a href="cli-tooling">Quarkus CLI</a></p>
</li>
<li>
<p>如果你想构建原生可执行程序，可以选择安装Mandrel或者GraalVM，并<a href="building-native-image#configuring-graalvm">正确配置</a>(或者使用Docker在容器中进行构建)</p>
</li>
<li>
<p>Elasticsearch installed or Docker installed</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a>应用结构</h2>
<div class="sectionbody">
<div class="paragraph">
<p>本指南中构建的应用程序非常简单：用户可以使用一个表单在列表中添加元素并更新列表。</p>
</div>
<div class="paragraph">
<p>浏览器和服务器之间的所有信息都被格式化为JSON。</p>
</div>
<div class="paragraph">
<p>The elements are stored in Elasticsearch.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-the-maven-project"><a class="anchor" href="#creating-the-maven-project"></a>创建Maven项目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>首先，我们需要一个新的工程项目。用以下命令创建一个新项目：</p>
</div>
<div class="sidebarblock primary asciidoc-tabs-sync-cli">
<div class="content">
<div class="title">CLI</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus create app org.acme:elasticsearch-quickstart \
    --extension='rest-jackson,elasticsearch-rest-client' \
    --no-code
cd elasticsearch-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>创建Grade项目，请添加 <code>--gradle</code> 或者 <code>--gradle-kotlin-dsl</code> 参数。</p>
</div>
<div class="paragraph">
<p>For more information about how to install and use the Quarkus CLI, see the <a href="cli-tooling">Quarkus CLI</a> guide.</p>
</div>
</div>
</div>
<div class="sidebarblock secondary asciidoc-tabs-sync-maven">
<div class="content">
<div class="title">Maven</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn io.quarkus.platform:quarkus-maven-plugin:3.32.1:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=elasticsearch-quickstart \
    -Dextensions='rest-jackson,elasticsearch-rest-client' \
    -DnoCode
cd elasticsearch-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>创建Grade项目，请添加 <code>-DbuildTool=gradle</code> 或者 <code>-DbuildTool=gradle-kotlin-dsl</code> 参数。</p>
</div>
</div>
</div>
<div class="paragraph">
<p>For Windows users:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If using cmd, (don&#8217;t use backward slash <code>\</code> and put everything on the same line)</p>
</li>
<li>
<p>If using Powershell, wrap <code>-D</code> parameters in double quotes e.g. <code>"-DprojectArtifactId=elasticsearch-quickstart"</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command generates a Maven structure importing the Quarkus REST (formerly RESTEasy Reactive), Jackson, and Elasticsearch low level REST client extensions.</p>
</div>
<div class="paragraph">
<p>The Elasticsearch low level REST client comes with the <code>quarkus-elasticsearch-rest-client</code> extension
that has been added to your build file.</p>
</div>
<div class="paragraph">
<p>If you want to use the Elasticsearch Java client instead, replace the <code>quarkus-elasticsearch-rest-client</code> extension by the <code>quarkus-elasticsearch-java-client</code> extension.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We use the <code>rest-jackson</code> extension here and not the JSON-B variant because we will use the Vert.x <code>JsonObject</code> helper
to serialize/deserialize our objects to/from Elasticsearch and it uses Jackson under the hood.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To add the extensions to an existing project, follow the instructions below.</p>
</div>
<div class="paragraph">
<p>For the Elasticsearch low level REST client, add the following dependency to your build file:</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-elasticsearch-rest-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation("io.quarkus:quarkus-elasticsearch-rest-client")</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the Elasticsearch Java client, add the following dependency to your build file:</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-elasticsearch-java-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation("io.quarkus:quarkus-elasticsearch-java-client")</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-your-first-json-rest-service"><a class="anchor" href="#creating-your-first-json-rest-service"></a>创建你的第一个JSON REST服务</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在这个例子中，我们将创建一个应用程序来管理fruit列表。</p>
</div>
<div class="paragraph">
<p>首先，让我们创建 <code>Fruit</code> 实体类，如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.elasticsearch;

public class Fruit {
    public String id;
    public String name;
    public String color;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>这非常的简单。需要注意的一件事是， JSON 序列化层需要具有默认构造函数。</p>
</div>
<div class="paragraph">
<p>Now create a <code>org.acme.elasticsearch.FruitService</code> that will be the business layer of our application
and will store/load the fruits from the Elasticsearch instance.
Here we use the low level REST client, if you want to use the Java API client instead,
follow the instructions in the <a href="#using-the-elasticsearch-java-client">Using the Elasticsearch Java Client</a> paragraph instead.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.elasticsearch;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;

import jakarta.enterprise.context.ApplicationScoped;
import jakarta.inject.Inject;

import org.apache.http.entity.ContentType;
import org.apache.http.entity.StringEntity;
import org.apache.http.util.EntityUtils;
import org.elasticsearch.client.Request;
import org.elasticsearch.client.Response;
import org.elasticsearch.client.RestClient;

import io.vertx.core.json.JsonArray;
import io.vertx.core.json.JsonObject;

@ApplicationScoped
public class FruitService {
    @Inject
    RestClient restClient; <i class="conum" data-value="1"></i><b>(1)</b>

    public void index(Fruit fruit) throws IOException {
        Request request = new Request(
                "PUT",
                "/fruits/_doc/" + fruit.id); <i class="conum" data-value="2"></i><b>(2)</b>
        request.setJsonEntity(JsonObject.mapFrom(fruit).toString()); <i class="conum" data-value="3"></i><b>(3)</b>
        restClient.performRequest(request); <i class="conum" data-value="4"></i><b>(4)</b>
    }

    public void index(List&lt;Fruit&gt; list) throws IOException {

        var entityList = new ArrayList&lt;JsonObject&gt;();

        for (var fruit : list) {

            entityList.add(new JsonObject().put("index", new JsonObject()<i class="conum" data-value="5"></i><b>(5)</b>
                    .put("_index", "fruits").put("_id", fruit.id)));
            entityList.add(JsonObject.mapFrom(fruit));
        }

        Request request = new Request(
                "POST", "fruits/_bulk?pretty");
        request.setEntity(new StringEntity(
                toNdJsonString(entityList),<i class="conum" data-value="6"></i><b>(6)</b>
                ContentType.create("application/x-ndjson")));<i class="conum" data-value="7"></i><b>(7)</b>
        restClient.performRequest(request);
    }

    public void delete(List&lt;String&gt; identityList) throws IOException {

        var entityList = new ArrayList&lt;JsonObject&gt;();

        for (var id : identityList) {
            entityList.add(new JsonObject().put("delete",
                    new JsonObject().put("_index", "fruits").put("_id", id)));<i class="conum" data-value="8"></i><b>(8)</b>
        }

        Request request = new Request(
                "POST", "fruits/_bulk?pretty");
        request.setEntity(new StringEntity(
                toNdJsonString(entityList),
                ContentType.create("application/x-ndjson")));
        restClient.performRequest(request);
    }

    public Fruit get(String id) throws IOException {
        Request request = new Request(
                "GET",
                "/fruits/_doc/" + id);
        Response response = restClient.performRequest(request);
        String responseBody = EntityUtils.toString(response.getEntity());
        JsonObject json = new JsonObject(responseBody); <i class="conum" data-value="9"></i><b>(9)</b>
        return json.getJsonObject("_source").mapTo(Fruit.class);
    }

    public List&lt;Fruit&gt; searchByColor(String color) throws IOException {
        return search("color", color);
    }

    public List&lt;Fruit&gt; searchByName(String name) throws IOException {
        return search("name", name);
    }

    private List&lt;Fruit&gt; search(String term, String match) throws IOException {
        Request request = new Request(
                "GET",
                "/fruits/_search");
        //construct a JSON query like {"query": {"match": {"&lt;term&gt;": "&lt;match"}}
        JsonObject termJson = new JsonObject().put(term, match);
        JsonObject matchJson = new JsonObject().put("match", termJson);
        JsonObject queryJson = new JsonObject().put("query", matchJson);
        request.setJsonEntity(queryJson.encode());
        Response response = restClient.performRequest(request);
        String responseBody = EntityUtils.toString(response.getEntity());

        JsonObject json = new JsonObject(responseBody);
        JsonArray hits = json.getJsonObject("hits").getJsonArray("hits");
        List&lt;Fruit&gt; results = new ArrayList&lt;&gt;(hits.size());
        for (int i = 0; i &lt; hits.size(); i++) {
            JsonObject hit = hits.getJsonObject(i);
            Fruit fruit = hit.getJsonObject("_source").mapTo(Fruit.class);
            results.add(fruit);
        }
        return results;
    }

    private static String toNdJsonString(List&lt;JsonObject&gt; objects) {
        return objects.stream()
                .map(JsonObject::encode)
                .collect(Collectors.joining("\n", "", "\n"));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We inject an Elasticsearch low level <code>RestClient</code> into our service.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We create an Elasticsearch request.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We use Vert.x <code>JsonObject</code> to serialize the object before sending it to Elasticsearch, you can use whatever you want to serialize your objects to JSON.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>We send the request (indexing request here) to Elasticsearch.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>As we <code>index</code> collection of objects we should use <code>index</code>, <code>create</code> or <code>update</code> action.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>We use <code>toNdJsonString(entityList)</code> call to produce output like below
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"index", {"_index" : "fruits", "_id", "1"}}
{"id": "1", "name": "apple", "color": "red"}
...           ...             ...        ...
{"create", {"_index" : "fruits", "_id", "N"}}
{"id": "N", "name": "dragonfruit", "color": "pink"}</code></pre>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Pass the content type that is expected by the search backend for bulk requests.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>The bulk API&#8217;s delete operation JSON already contains all the required information; hence, there is no request body following this operation in the Bulk API request body.
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"delete", {"_index" : "fruits", "_id", "1"}}
{"delete", {"_index" : "fruits", "_id", "2"}}
...           ...             ...        ...
{"delete", {"_index" : "fruits", "_id", "N"}}</code></pre>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>In order to deserialize the object from Elasticsearch, we again use Vert.x JsonObject.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, create the <code>org.acme.elasticsearch.FruitResource</code> class as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.elasticsearch;

import java.io.IOException;
import java.net.URI;
import java.util.List;
import java.util.UUID;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.POST;
import jakarta.ws.rs.DELETE;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.PathParam;
import jakarta.ws.rs.QueryParam;
import jakarta.ws.rs.core.Response;
import jakarta.ws.rs.BadRequestException;

@Path("/fruits")
public class FruitResource {

    @Inject
    FruitService fruitService;

    @POST
    public Response index(Fruit fruit) throws IOException {
        if (fruit.id == null) {
            fruit.id = UUID.randomUUID().toString();
        }
        fruitService.index(fruit);
        return Response.created(URI.create("/fruits/" + fruit.id)).build();
    }

    @Path("bulk")
    @DELETE
    public Response delete(List&lt;String&gt; identityList) throws IOException {
        fruitService.delete(identityList);
        return Response.ok().build();
    }

    @Path("bulk")
    @POST
    public Response index(List&lt;Fruit&gt; list) throws IOException {
        fruitService.index(list);
        return Response.ok().build();
    }

    @GET
    @Path("/{id}")
    public Fruit get(String id) throws IOException {
        return fruitService.get(id);
    }

    @GET
    @Path("/search")
    public List&lt;Fruit&gt; search(@RestQuery String name, @RestQuery String color) throws IOException {
        if (name != null) {
            return fruitService.searchByName(name);
        } else if (color != null) {
            return fruitService.searchByColor(color);
        } else {
            throw new BadRequestException("Should provide name or color query parameter");
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The implementation is pretty straightforward and you just need to define your endpoints using the Jakarta REST annotations and use the <code>FruitService</code> to list/add new fruits.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-elasticsearch"><a class="anchor" href="#configuring-elasticsearch"></a>Configuring Elasticsearch</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The main property to configure is the URL to connect to the Elasticsearch cluster.</p>
</div>
<div class="paragraph">
<p>For a typical clustered Elasticsearch service, a sample configuration would look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># configure the Elasticsearch client for a cluster of two nodes
quarkus.elasticsearch.hosts = elasticsearch1:9200,elasticsearch2:9200</code></pre>
</div>
</div>
<div class="paragraph">
<p>In our case, we are using a single instance running on localhost:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># configure the Elasticsearch client for a single instance on localhost
quarkus.elasticsearch.hosts = localhost:9200</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need a more advanced configuration, you can find the comprehensive list of supported configuration properties at the end of this guide.</p>
</div>
<div class="sect2">
<h3 id="dev-services"><a class="anchor" href="#dev-services"></a>开发服务</h3>
<div class="paragraph">
<p>Quarkus supports a feature called Dev Services that allows you to start various containers without any config.
In the case of Elasticsearch, this support extends to the default Elasticsearch connection.
What that means practically is that, if you have not configured <code>quarkus.elasticsearch.hosts</code>, Quarkus will automatically
start an Elasticsearch container when running tests or dev mode, and automatically configure the connection.</p>
</div>
<div class="paragraph">
<p>When running the production version of the application, the Elasticsearch connection needs to be configured as usual,
so if you want to include a production database config in your <code>application.properties</code> and continue to use Dev Services
we recommend that you use the <code>%prod.</code> profile to define your Elasticsearch settings.</p>
</div>
<div class="paragraph">
<p>For more information you can read the <a href="elasticsearch-dev-services">Dev Services for Elasticsearch guide</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="programmatically-configuring-elasticsearch"><a class="anchor" href="#programmatically-configuring-elasticsearch"></a>Programmatically Configuring Elasticsearch</h3>
<div class="paragraph">
<p>On top of the parametric configuration, you can also programmatically apply additional configuration to the client by implementing a <code>RestClientBuilder.HttpClientConfigCallback</code> and annotating it with <code>ElasticsearchClientConfig</code>. You may provide multiple implementations and configuration provided by each implementation will be applied in a randomly ordered cascading manner.</p>
</div>
<div class="paragraph">
<p>For example, when accessing an Elasticsearch cluster that is set up for TLS on the HTTP layer, the client needs to trust the certificate that Elasticsearch is using. The following is an example of setting up the client to trust the CA that has signed the certificate that Elasticsearch is using, when that CA certificate is available in a PKCS#12 keystore.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.quarkus.elasticsearch.restclient.lowlevel.ElasticsearchClientConfig;
import org.apache.http.impl.nio.client.HttpAsyncClientBuilder;
import org.apache.http.ssl.SSLContextBuilder;
import org.apache.http.ssl.SSLContexts;
import org.elasticsearch.client.RestClientBuilder;

import jakarta.enterprise.context.Dependent;
import javax.net.ssl.SSLContext;
import java.io.InputStream;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.security.KeyStore;

@ElasticsearchClientConfig
public class SSLContextConfigurator implements RestClientBuilder.HttpClientConfigCallback {
    @Override
    public HttpAsyncClientBuilder customizeHttpClient(HttpAsyncClientBuilder httpClientBuilder) {
        try {
            String keyStorePass = "password-for-keystore";
            Path trustStorePath = Paths.get("/path/to/truststore.p12");
            KeyStore truststore = KeyStore.getInstance("pkcs12");
            try (InputStream is = Files.newInputStream(trustStorePath)) {
                truststore.load(is, keyStorePass.toCharArray());
            }
            SSLContextBuilder sslBuilder = SSLContexts.custom()
                    .loadTrustMaterial(truststore, null);
            SSLContext sslContext = sslBuilder.build();
            httpClientBuilder.setSSLContext(sslContext);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }

        return httpClientBuilder;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/_encrypted_communication.html">Elasticsearch documentation</a> for more details on this particular example.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Classes marked with <code>@ElasticsearchClientConfig</code> are made application scoped CDI beans by default.
You can override the scope at the class level if you prefer a different scope.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-an-elasticsearch-cluster"><a class="anchor" href="#running-an-elasticsearch-cluster"></a>Running an Elasticsearch cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As by default, the Elasticsearch client is configured to access a local Elasticsearch cluster on port 9200 (the default Elasticsearch port),
if you have a local running instance on this port, there is nothing more to do before being able to test it!</p>
</div>
<div class="paragraph">
<p>If you want to use Docker to run an Elasticsearch instance, you can use the following command to launch one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run --name elasticsearch  -e "discovery.type=single-node" -e "ES_JAVA_OPTS=-Xms512m -Xmx512m"\
       -e "cluster.routing.allocation.disk.threshold_enabled=false" -e "xpack.security.enabled=false"\
       --rm -p 9200:9200 docker.io/elastic/elasticsearch:9.2.2</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-application"><a class="anchor" href="#running-the-application"></a>运行应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s start our application in dev mode:</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">CLI</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew --console=plain quarkusDev</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can add new fruits to the list via the following curl command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl localhost:8080/fruits -d '{"name": "bananas", "color": "yellow"}' -H "Content-Type: application/json"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And search for fruits by name or color via the following curl command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl localhost:8080/fruits/search?color=yellow</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-the-elasticsearch-java-client"><a class="anchor" href="#using-the-elasticsearch-java-client"></a>Using the Elasticsearch Java Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is a version of the <code>FruitService</code> using the Elasticsearch Java Client instead of the low level one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.io.IOException;
import java.io.StringReader;
import java.util.List;
import java.util.stream.Collectors;

import jakarta.enterprise.context.ApplicationScoped;
import jakarta.inject.Inject;

import co.elastic.clients.elasticsearch.ElasticsearchClient;
import co.elastic.clients.elasticsearch.core.IndexRequest;
import co.elastic.clients.elasticsearch._types.FieldValue;
import co.elastic.clients.elasticsearch._types.query_dsl.QueryBuilders;
import co.elastic.clients.elasticsearch.core.search.Hit;
import co.elastic.clients.elasticsearch.core.search.HitsMetadata;
import co.elastic.clients.elasticsearch.core.GetRequest;
import co.elastic.clients.elasticsearch.core.GetResponse;
import co.elastic.clients.elasticsearch.core.SearchRequest;
import co.elastic.clients.elasticsearch.core.SearchResponse;
import co.elastic.clients.elasticsearch.core.BulkRequest;
import co.elastic.clients.elasticsearch.core.BulkResponse;

@ApplicationScoped
public class FruitService {
    @Inject
    ElasticsearchClient client; <i class="conum" data-value="1"></i><b>(1)</b>

    public void index(Fruit fruit) throws IOException {
        IndexRequest&lt;Fruit&gt; request = IndexRequest.of(  <i class="conum" data-value="2"></i><b>(2)</b>
            b -&gt; b.index("fruits")
                .id(fruit.id)
                .document(fruit)); <i class="conum" data-value="3"></i><b>(3)</b>
        client.index(request);  <i class="conum" data-value="4"></i><b>(4)</b>
    }

    public void index(List&lt;Fruit&gt; list) throws IOException {

        BulkRequest.Builder br = new BulkRequest.Builder();

        for (var fruit : list) {
            br.operations(op -&gt; op
                    .index(idx -&gt; idx.index("fruits").id(fruit.id).document(fruit)));
        }

        BulkResponse result = client.bulk(br.build());

        if (result.errors()) {
            throw new RuntimeException("The indexing operation encountered errors.");
        }
    }

    public void delete(List&lt;String&gt; list) throws IOException {

        BulkRequest.Builder br = new BulkRequest.Builder();

        for (var id : list) {
            br.operations(op -&gt; op.delete(idx -&gt; idx.index("fruits").id(id)));
        }

        BulkResponse result = client.bulk(br.build());

        if (result.errors()) {
            throw new RuntimeException("The indexing operation encountered errors.");
        }
    }

    public Fruit get(String id) throws IOException {
        GetRequest getRequest = GetRequest.of(
            b -&gt; b.index("fruits")
                .id(id));
        GetResponse&lt;Fruit&gt; getResponse = client.get(getRequest, Fruit.class);
        if (getResponse.found()) {
            return getResponse.source();
        }
        return null;
    }

    public List&lt;Fruit&gt; searchByColor(String color) throws IOException {
        return search("color", color);
    }

    public List&lt;Fruit&gt; searchByName(String name) throws IOException {
        return search("name", name);
    }

    private List&lt;Fruit&gt; search(String term, String match) throws IOException {
        SearchRequest searchRequest = SearchRequest.of(
            b -&gt; b.index("fruits")
                .query(QueryBuilders.match().field(term).query(FieldValue.of(match)).build()._toQuery()));

        SearchResponse&lt;Fruit&gt; searchResponse = client.search(searchRequest, Fruit.class);
        HitsMetadata&lt;Fruit&gt; hits = searchResponse.hits();
        return hits.hits().stream().map(hit -&gt; hit.source()).collect(Collectors.toList());
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We inject an <code>ElasticsearchClient</code> inside the service.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We create an Elasticsearch index request using a builder.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We directly pass the object to the request as the Java API client has a serialization layer.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>We send the request to Elasticsearch.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hibernate-search-elasticsearch"><a class="anchor" href="#hibernate-search-elasticsearch"></a>Hibernate Search Elasticsearch</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus supports Hibernate Search with Elasticsearch via the <code>quarkus-hibernate-search-orm-elasticsearch</code> extension.</p>
</div>
<div class="paragraph">
<p>Hibernate Search Elasticsearch allows to synchronize your Jakarta Persistence entities to an Elasticsearch cluster and offers a way to query your Elasticsearch cluster using the Hibernate Search API.</p>
</div>
<div class="paragraph">
<p>If you are interested in it, please consult the <a href="hibernate-search-orm-elasticsearch">Hibernate Search with Elasticsearch guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cluster-health-check"><a class="anchor" href="#cluster-health-check"></a>Cluster Health Check</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are using the <code>quarkus-smallrye-health</code> extension, both extensions will automatically add a readiness health check
to validate the health of the cluster.</p>
</div>
<div class="paragraph">
<p>So when you access the <code>/q/health/ready</code> endpoint of your application, you will have information about the cluster status.
It uses the cluster health endpoint, the check will be down if the status of the cluster is <strong>red</strong>, or the cluster is not available.</p>
</div>
<div class="paragraph">
<p>This behavior can be disabled by setting the <code>quarkus.elasticsearch.health.enabled</code> property to <code>false</code> in your <code>application.properties</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-a-native-executable"><a class="anchor" href="#building-a-native-executable"></a>构建一个本地可执行文件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use both clients in a native executable.</p>
</div>
<div class="paragraph">
<p>你可以使用常用命令构建本机可执行文件：</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">CLI</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus build --native</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw install -Dnative</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew build -Dquarkus.native.enabled=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running it is as simple as executing <code>./target/elasticsearch-low-level-client-quickstart-1.0.0-SNAPSHOT-runner</code>.</p>
</div>
<div class="paragraph">
<p>然后你可以使用的浏览器访问 <code>&lt;a href="http://localhost:8080/fruits.html" class="bare"&gt;<a href="http://localhost:8080/fruits.html&lt;/a&gt" class="bare">http://localhost:8080/fruits.html&lt;/a&gt</a>;</code> 来使用你的应用程序。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>解决方案</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Accessing an Elasticsearch cluster from the low level REST client or the Elasticsearch Java client is easy with Quarkus as it provides easy configuration, CDI integration and native support for it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-reference"><a class="anchor" href="#configuration-reference"></a>配置参考</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> Configuration property fixed at build time - All other configuration properties are overridable at runtime <input type="search" id="config-search-0" placeholder="FILTER CONFIGURATION" disabled></p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable configuration-reference-all-rows">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><span class="header-title">Configuration property</span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">类型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">默认</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-health-enabled"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-health-enabled"><code>quarkus.elasticsearch.health.enabled</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.health.enabled' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-1" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether a health check is published in case the smallrye-health extension is present.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6332">QUARKUS_ELASTICSEARCH_HEALTH_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6332" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-hosts"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-hosts"><code>quarkus.elasticsearch.hosts</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.hosts' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-2" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The list of hosts of the Elasticsearch servers.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6333">QUARKUS_ELASTICSEARCH_HOSTS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6333" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of host:port</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>localhost:9200</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-protocol"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-protocol"><code>quarkus.elasticsearch.protocol</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.protocol' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-3" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The protocol to use when contacting Elasticsearch servers. Set to "https" to enable SSL/TLS.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6334">QUARKUS_ELASTICSEARCH_PROTOCOL</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6334" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>http</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-username"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-username"><code>quarkus.elasticsearch.username</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.username' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-4" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The username for basic HTTP authentication.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6335">QUARKUS_ELASTICSEARCH_USERNAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6335" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-password"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-password"><code>quarkus.elasticsearch.password</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.password' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-5" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The password for basic HTTP authentication.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6336">QUARKUS_ELASTICSEARCH_PASSWORD</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6336" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-api-key"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-api-key"><code>quarkus.elasticsearch.api-key</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.api-key' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-6" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The API key for authentication.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6337">QUARKUS_ELASTICSEARCH_API_KEY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6337" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-connection-timeout"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-connection-timeout"><code>quarkus.elasticsearch.connection-timeout</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.connection-timeout' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-7" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The connection timeout.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6338">QUARKUS_ELASTICSEARCH_CONNECTION_TIMEOUT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6338" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html">Duration</a> <a href="#duration-note-anchor-quarkus-elasticsearch-rest-client_quarkus-elasticsearch"><span class="icon"><i class="fa fa-question-circle" title="More information about the Duration format"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1S</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-socket-timeout"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-socket-timeout"><code>quarkus.elasticsearch.socket-timeout</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.socket-timeout' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-8" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The socket timeout.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6339">QUARKUS_ELASTICSEARCH_SOCKET_TIMEOUT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6339" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html">Duration</a> <a href="#duration-note-anchor-quarkus-elasticsearch-rest-client_quarkus-elasticsearch"><span class="icon"><i class="fa fa-question-circle" title="More information about the Duration format"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>30S</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-max-connections"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-max-connections"><code>quarkus.elasticsearch.max-connections</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.max-connections' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-9" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The maximum number of connections to all the Elasticsearch servers.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6340">QUARKUS_ELASTICSEARCH_MAX_CONNECTIONS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6340" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>40</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-max-connections-per-route"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-max-connections-per-route"><code>quarkus.elasticsearch.max-connections-per-route</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.max-connections-per-route' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-10" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The maximum number of connections per Elasticsearch server.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6341">QUARKUS_ELASTICSEARCH_MAX_CONNECTIONS_PER_ROUTE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6341" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>20</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-io-thread-counts"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-io-thread-counts"><code>quarkus.elasticsearch.io-thread-counts</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.io-thread-counts' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-11" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The number of IO thread. By default, this is the number of locally detected processors.</p>
</div>
<div class="paragraph">
<p>Thread counts higher than the number of processors should not be necessary because the I/O threads rely on non-blocking operations, but you may want to use a thread count lower than the number of processors.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6342">QUARKUS_ELASTICSEARCH_IO_THREAD_COUNTS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6342" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-discovery-enabled"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-discovery-enabled"><code>quarkus.elasticsearch.discovery.enabled</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.discovery.enabled' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-12" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Defines if automatic discovery is enabled.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6343">QUARKUS_ELASTICSEARCH_DISCOVERY_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6343" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-discovery-refresh-interval"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-discovery-refresh-interval"><code>quarkus.elasticsearch.discovery.refresh-interval</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.discovery.refresh-interval' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-13" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Refresh interval of the node list.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6344">QUARKUS_ELASTICSEARCH_DISCOVERY_REFRESH_INTERVAL</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6344" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html">Duration</a> <a href="#duration-note-anchor-quarkus-elasticsearch-rest-client_quarkus-elasticsearch"><span class="icon"><i class="fa fa-question-circle" title="More information about the Duration format"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>5M</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-elasticsearch-rest-client_section_quarkus-elasticsearch-devservices"></a> <span class="section-name section-level0"><a href="#quarkus-elasticsearch-rest-client_section_quarkus-elasticsearch-devservices">Dev Services</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">类型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">默认</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-enabled"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-enabled"><code>quarkus.elasticsearch.devservices.enabled</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.devservices.enabled' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-14" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether this Dev Service should start with the application in dev mode or tests.</p>
</div>
<div class="paragraph">
<p>Dev Services are enabled by default
unless connection configuration (e.g. <code>quarkus.elasticsearch.hosts</code>) is set explicitly.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6345">QUARKUS_ELASTICSEARCH_DEVSERVICES_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6345" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-port"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-port"><code>quarkus.elasticsearch.devservices.port</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.devservices.port' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-15" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Optional fixed port the dev service will listen to.</p>
</div>
<div class="paragraph">
<p>If not defined, the port will be chosen randomly.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6346">QUARKUS_ELASTICSEARCH_DEVSERVICES_PORT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6346" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-distribution"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-distribution"><code>quarkus.elasticsearch.devservices.distribution</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.devservices.distribution' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-16" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The Elasticsearch distribution to use.</p>
</div>
<div class="paragraph">
<p>Defaults to a distribution inferred from the explicitly configured <code>image-name</code> (if any),
or by default to the distribution configured in depending extensions (e.g. Hibernate Search),
or by default to <code>elastic</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6347">QUARKUS_ELASTICSEARCH_DEVSERVICES_DISTRIBUTION</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6347" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>elastic</code>, <code>opensearch</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-image-name"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-image-name"><code>quarkus.elasticsearch.devservices.image-name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.devservices.image-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-17" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The Elasticsearch container image to use.</p>
</div>
<div class="paragraph">
<p>Defaults depend on the configured <code>distribution</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For the <code>elastic</code> distribution: <code>docker.io/elastic/elasticsearch:9.2.2</code></p>
</li>
<li>
<p>For the <code>opensearch</code> distribution: <code>docker.io/opensearchproject/opensearch:3.4.0</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6348">QUARKUS_ELASTICSEARCH_DEVSERVICES_IMAGE_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6348" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-java-opts"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-java-opts"><code>quarkus.elasticsearch.devservices.java-opts</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.devservices.java-opts' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-18" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The value for the ES_JAVA_OPTS env variable.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6349">QUARKUS_ELASTICSEARCH_DEVSERVICES_JAVA_OPTS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6349" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>-Xms512m -Xmx1g</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-shared"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-shared"><code>quarkus.elasticsearch.devservices.shared</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.devservices.shared' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-19" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether the Elasticsearch server managed by Quarkus Dev Services is shared.</p>
</div>
<div class="paragraph">
<p>When shared, Quarkus looks for running containers using label-based service discovery. If a matching container is found, it is used, and so a second one is not started. Otherwise, Dev Services for Elasticsearch starts a new container.</p>
</div>
<div class="paragraph">
<p>The discovery uses the <code>quarkus-dev-service-elasticsearch</code> label. The value is configured using the <code>service-name</code> property.</p>
</div>
<div class="paragraph">
<p>Container sharing is only used in dev mode.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6350">QUARKUS_ELASTICSEARCH_DEVSERVICES_SHARED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6350" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-service-name"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-service-name"><code>quarkus.elasticsearch.devservices.service-name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.devservices.service-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-20" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The value of the <code>quarkus-dev-service-elasticsearch</code> label attached to the started container.</p>
</div>
<div class="paragraph">
<p>This property is used when <code>shared</code> is set to <code>true</code>. In this case, before starting a container, Dev Services for Elasticsearch looks for a container with the <code>quarkus-dev-service-elasticsearch</code> label set to the configured value. If found, it will use this container instead of starting a new one. Otherwise it starts a new container with the <code>quarkus-dev-service-elasticsearch</code> label set to the specified value.</p>
</div>
<div class="paragraph">
<p>This property is used when you need multiple shared Elasticsearch servers.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6351">QUARKUS_ELASTICSEARCH_DEVSERVICES_SERVICE_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6351" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>elasticsearch</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-container-env-environment-variable-name"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-container-env-environment-variable-name"><code>quarkus.elasticsearch.devservices.container-env."environment-variable-name"</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.devservices.container-env."environment-variable-name"' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-21" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Environment variables that are passed to the container.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6352">QUARKUS_ELASTICSEARCH_DEVSERVICES_CONTAINER_ENV__ENVIRONMENT_VARIABLE_NAME_</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6352" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Map&lt;String,String&gt;</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-reuse"></a> <span class="property-path"><a href="#quarkus-elasticsearch-rest-client_quarkus-elasticsearch-devservices-reuse"><code>quarkus.elasticsearch.devservices.reuse</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.elasticsearch.devservices.reuse' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-22" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether to keep Dev Service containers running <strong>after a dev mode session or test suite execution</strong>
to reuse them in the next dev mode session or test suite execution.</p>
</div>
<div class="paragraph">
<p>Within a dev mode session or test suite execution,
Quarkus will always reuse Dev Services as long as their configuration
(username, password, environment, port bindings, &#8230;&#8203;) did not change.
This feature is specifically about keeping containers running
<strong>when Quarkus is not running</strong> to reuse them across runs.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This feature needs to be enabled explicitly in <code>testcontainers.properties</code>,
may require changes to how you configure data initialization in dev mode and tests,
and may leave containers running indefinitely, forcing you to stop and remove them manually.
See <a href="elasticsearch-dev-services#reuse">this section of the documentation</a> for more information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This configuration property is set to <code>true</code> by default,
so it is mostly useful to <strong>disable</strong> reuse,
if you enabled it in <code>testcontainers.properties</code>
but only want to use it for some of your Quarkus applications.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-6353">QUARKUS_ELASTICSEARCH_DEVSERVICES_REUSE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-6353" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
<div id="duration-note-anchor-quarkus-elasticsearch-rest-client_quarkus-elasticsearch" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">About the Duration format</div>
<div class="paragraph">
<p>To write duration values, use the standard <code>java.time.Duration</code> format.
See the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html#parse(java.lang.CharSequence)">Duration#parse() Java API documentation</a> for more information.</p>
</div>
<div class="paragraph">
<p>You can also use a simplified format, starting with a number:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the value is only a number, it represents time in seconds.</p>
</li>
<li>
<p>If the value is a number followed by <code>ms</code>, it represents time in milliseconds.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In other cases, the simplified format is translated to the <code>java.time.Duration</code> format for parsing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the value is a number followed by <code>h</code>, <code>m</code>, or <code>s</code>, it is prefixed with <code>PT</code>.</p>
</li>
<li>
<p>If the value is a number followed by <code>d</code>, it is prefixed with <code>P</code>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#prerequisites">先决条件</a></li>
<li><a href="#architecture">应用结构</a></li>
<li><a href="#creating-the-maven-project">创建Maven项目</a></li>
<li><a href="#creating-your-first-json-rest-service">创建你的第一个JSON REST服务</a></li>
<li><a href="#configuring-elasticsearch">Configuring Elasticsearch</a>
<ul class="sectlevel2">
<li><a href="#dev-services">开发服务</a></li>
<li><a href="#programmatically-configuring-elasticsearch">Programmatically Configuring Elasticsearch</a></li>
</ul>
</li>
<li><a href="#running-an-elasticsearch-cluster">Running an Elasticsearch cluster</a></li>
<li><a href="#running-the-application">运行应用程序</a></li>
<li><a href="#using-the-elasticsearch-java-client">Using the Elasticsearch Java Client</a></li>
<li><a href="#hibernate-search-elasticsearch">Hibernate Search Elasticsearch</a></li>
<li><a href="#cluster-health-check">Cluster Health Check</a></li>
<li><a href="#building-a-native-executable">构建一个本地可执行文件</a></li>
<li><a href="#conclusion">解决方案</a></li>
<li><a href="#configuration-reference">配置参考</a></li>
</ul></div>
    </div>
  </div>
  <h2>Related content</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same extensions</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/guides/elasticsearch-dev-services">Dev Services for Elasticsearch</a></li>
      </ul>
    </div>
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same topics</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/guides/elasticsearch-dev-services">Dev Services for Elasticsearch</a></li>
      
        
        <li class="guide"><a href="/guides/hibernate-search-standalone-elasticsearch">Use Hibernate Search in Standalone mode with Elasticsearch/OpenSearch</a></li>
      
        
        <li class="guide"><a href="/guides/hibernate-search-orm-elasticsearch">Use Hibernate Search with Hibernate ORM and Elasticsearch/OpenSearch</a></li>
      
        
        <li class="guide"><a href="/guides/redis-dev-services">Redis的Dev Services</a></li>
      
        
        <li class="reference"><a href="/guides/redis-reference">Redis Extension Reference Guide</a></li>
      
        
        <li class="guide"><a href="/guides/mongodb-panache">使用Panache简化MongoDB</a></li>
      
        
        <li class="guide"><a href="/guides/mongodb-panache-kotlin">用Panache和Kotlin简化MongoDB</a></li>
      
        
        <li class="guide"><a href="/guides/mongodb">使用MongoDB客户端</a></li>
      
        
        <li class="guide"><a href="/guides/redis">使用Redis客户端</a></li>
      
        
        <li class="guide"><a href="/guides/cache">Application Data Caching</a></li>
      
        
        <li class="reference"><a href="/guides/datasource">Configure data sources in Quarkus</a></li>
      
        
        <li class="guide"><a href="/guides/databases-dev-services">Dev Services for Databases</a></li>
      
        
        <li class="guide"><a href="/guides/infinispan-dev-services">Dev Services for Infinispan</a></li>
      
        
        <li class="guide"><a href="/guides/lra-dev-services">Dev Services for LRA</a></li>
      
        
        <li class="guide"><a href="/guides/rest-data-panache">Generating Jakarta REST resources with Panache</a></li>
      
        
        <li class="reference"><a href="/guides/cache-infinispan-reference">Infinispan Cache</a></li>
      
        
        <li class="reference"><a href="/guides/infinispan-client-reference">Infinispan Client Extension Reference Guide</a></li>
      
        
        <li class="guide"><a href="/guides/lra">Narayana LRA Participant Support</a></li>
      
        
        <li class="guide"><a href="/guides/reactive-sql-clients">响应式SQL客户端</a></li>
      
        
        <li class="reference"><a href="/guides/cache-redis-reference">Redis Cache</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">博客</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">活动</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">新闻</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">路线图</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="https://github.com/commonhaus/artwork/tree/main/projects/quarkus" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">开始体验</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>
