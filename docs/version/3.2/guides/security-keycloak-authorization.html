<!DOCTYPE html>
<html lang="cn">







<head>
  <title>使用OpenID连接（OIDC）与Keycloak来做集中式授权 - 3.2 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.2/guides/security-keycloak-authorization" />
  <meta property="og:title" content="使用OpenID连接（OIDC）与Keycloak来做集中式授权 - 3.2" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/security-keycloak-authorization">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/version/3.2/guides/security-keycloak-authorization" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/version/3.2/guides/security-keycloak-authorization" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/version/3.2/guides/security-keycloak-authorization" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/version/3.2/guides/security-keycloak-authorization" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/version/3.2/guides/security-keycloak-authorization" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  


<div class="grid-wrapper communitysite">
  <div class="grid__item width-12-12">The <a href="https://quarkus.io/version/3.2/guides/security-keycloak-authorization">English version of quarkus.io</a> is the official project site. Translated sites are community supported on a best-effort basis.</div>
</div>


  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">QUARKUS是什么？</a></li>
          <li><a href="/developer-joy" class="">开发者的乐趣 </a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES 原生</a></li>
          <li><a href="/standards" class="">标准</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">容器优先 </a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">入门</a></li>
          <li><a href="/guides" class="active" >指南</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP视频</a></li>          
          <li><a href="/books" class="">书籍</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
<li><a href="https://quarkus.io/extensions/" class="">浏览扩展</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">使用扩展</a></li>
          <li><a href="/guides/writing-extensions" class="" >创建扩展</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">支持</a></li>
          <li><a href="/blog" class="" >博客</a></li>
          <li><a href="/discussion" class="">讨论</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="" >播客</a></li>
          <li><a href="/events" class="">活动</a></li>
          <li><a href="/newsletter" class="">新闻</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">路线图</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary
white">开始编码</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.2/guides/security-keycloak-authorization" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.2/guides/security-keycloak-authorization">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/version/3.2/guides/security-keycloak-authorization">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.2/guides/security-keycloak-authorization">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.2/guides/security-keycloak-authorization">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas
fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    





<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.2/guides/">返回指南目录</a>
    </div>
    <div class="flexlabel">
      <label>选择指南版本</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.28.5 - Latest</option>
        
        
        
        <option value="3.27" >3.27</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" >3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      <h1 class="text-caps">使用OpenID连接（OIDC）与Keycloak来做集中式授权 </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>本指南展示了如何在您的Quarkus应用程序中使用 <a href="https://www.keycloak.org/docs/latest/authorization_services/index.html">Keycloak授权服务</a> 来授权不记名token(bearer token)访问受保护的资源。</p>
</div>
<div class="paragraph">
<p>The <code>quarkus-keycloak-authorization</code> extension is based on <code>quarkus-oidc</code> and provides a policy enforcer that enforces access to protected resources based on permissions managed by Keycloak and currently can only be used with the Quarkus <a href="security-oidc-bearer-token-authentication">OIDC service applications</a>.</p>
</div>
<div class="paragraph">
<p>It provides a flexible and dynamic authorization capability based on Resource-Based Access Control.</p>
</div>
<div class="paragraph">
<p>Instead of explicitly enforcing access based on some specific access control mechanism such as Role-Based Access Control(RBAC), <code>quarkus-keycloak-authorization</code> checks whether a request is allowed to access a resource based on its name, identifier or URI by sending a bearer access token verified by <code>quarkus-oidc</code> to Keycloak Authorization Services where an authorization decision is made.</p>
</div>
<div class="paragraph">
<p>Use <code>quarkus-keycloak-authorization</code> only if you work with Keycloak and have Keycloak Authorization Services enabled to make authorization decisions. Use <code>quarkus-oidc</code> if you do not work with Keycloak or work with Keycloak but do not have its Keycloak Authorization Services enabled to make authorization decisions.</p>
</div>
<div class="paragraph">
<p>通过将授权功能从您的应用程序中抽离并外部化，您可以使用不同的访问控制机制来保护您的应用程序，也可以避免在您的安全控制需求发生变化时重新部署您的应用程序。Keycloak将作为一个集中的授权服务，它允许您的受保护资源和它们的相关权限在它这里得到管理。</p>
</div>
<div class="paragraph">
<p>See the <a href="security-oidc-bearer-token-authentication">OIDC Bearer token authentication</a> guide for more information about <code>Bearer Token</code> authentication mechanism. It is important to realize that it is the <code>Bearer Token</code> authentication mechanism which does the authentication and creates a security identity - while the <code>quarkus-keycloak-authorization</code> extension is responsible for applying a Keycloak Authorization Policy to this identity based on the current request path and other policy settings.</p>
</div>
<div class="paragraph">
<p>Please see <a href="https://www.keycloak.org/docs/latest/authorization_services/index.html#_enforcer_overview">Keycloak Authorization Services documentation</a> for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>先决条件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>完成这个指南，你需要:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>大概15分钟</p>
</li>
<li>
<p>编辑器</p>
</li>
<li>
<p>安装JDK 11以上版本并正确配置了 <code>JAVA_HOME</code></p>
</li>
<li>
<p>Apache Maven 3.9.3</p>
</li>
<li>
<p>A working container runtime (Docker or <a href="podman">Podman</a>)</p>
</li>
<li>
<p>如果你愿意的话，还可以选择使用<a href="cli-tooling">Quarkus CLI</a></p>
</li>
<li>
<p>如果你想构建原生可执行程序，可以选择安装Mandrel或者GraalVM，并<a href="building-native-image#configuring-graalvm">正确配置</a>(或者使用Docker在容器中进行构建)</p>
</li>
<li>
<p><a href="https://stedolan.github.io/jq/">jq工具</a></p>
</li>
<li>
<p><a href="https://www.keycloak.org/docs/latest/server_installation/index.html">Keycloak</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a>架构</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在该例子中，我们建立了一个非常简单的微服务并提供了两个节点：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/api/users/me</code></p>
</li>
<li>
<p><code>/api/admin</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>这些节点是受保护的，只有当客户端将一个bearer token与请求一起发送时才能被访问，而且该token必须是有效的（例如：签名、过期时间和受众），并且要得到微服务的信任。</p>
</div>
<div class="paragraph">
<p>不记名令牌是由Keycloak服务器颁发的，并代表令牌发放对象的主体。对于OAuth 2.0授权服务器来说，该令牌还引用了代表用户的客户端。</p>
</div>
<div class="paragraph">
<p><code>/api/users/me</code> 节点可由任何拥有有效token的用户访问。作为响应，它返回一个JSON文档，其中包含关于用户的详细信息，这些详细信息是从token上的信息中获得的。这个节点受到RBAC（基于角色的访问控制）的保护，只有被授予 <code>user</code> 角色的用户才能访问这个节点。</p>
</div>
<div class="paragraph">
<p><code>/api/admin</code> 节点受到RBAC（基于角色的访问控制）的保护，只有被授予 <code>admin</code> 角色的用户才能访问它。</p>
</div>
<div class="paragraph">
<p>该示例非常简单，它使用RBAC策略来管理对您的资源的访问。但是，Keycloak也支持其他类型的策略，您可以用这些策略来执行更细粒度的访问控制。通过这个例子，您会发现您的应用程序与授权策略完全解耦，授权策略的执行完全基于所访问的资源。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="solution"><a class="anchor" href="#solution"></a>解决方案</h2>
<div class="sectionbody">
<div class="paragraph">
<p>我们建议您按照下一节的说明逐步创建应用程序。然而，您可以直接转到已完成的示例。</p>
</div>
<div class="paragraph">
<p>克隆 Git 仓库： <code>git clone -b 3.2 <a href="https://github.com/quarkusio/quarkus-quickstarts.git" class="bare">https://github.com/quarkusio/quarkus-quickstarts.git</a></code> ，或者下载 <a href="https://github.com/quarkusio/quarkus-quickstarts/archive/3.2.zip">存档</a> 。</p>
</div>
<div class="paragraph">
<p>The solution is located in the <code>security-keycloak-authorization-quickstart</code> <a href="https://github.com/quarkusio/quarkus-quickstarts/tree/3.2/security-keycloak-authorization-quickstart">directory</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-the-project"><a class="anchor" href="#creating-the-project"></a>创建项目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>首先，我们需要一个新的工程项目。用以下命令创建一个新项目：</p>
</div>
<div class="sidebarblock primary asciidoc-tabs-sync-cli">
<div class="content">
<div class="title">CLI</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus create app org.acme:security-keycloak-authorization-quickstart \
    --extension='oidc,keycloak-authorization,resteasy-reactive-jackson' \
    --no-code
cd security-keycloak-authorization-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>创建Grade项目，请添加 <code>--gradle</code> 或者 <code>--gradle-kotlin-dsl</code> 参数。</p>
</div>
<div class="paragraph">
<p>For more information about how to install and use the Quarkus CLI, see the <a href="cli-tooling">Quarkus CLI</a> guide.</p>
</div>
</div>
</div>
<div class="sidebarblock secondary asciidoc-tabs-sync-maven">
<div class="content">
<div class="title">Maven</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn io.quarkus.platform:quarkus-maven-plugin:3.2.12.Final:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=security-keycloak-authorization-quickstart \
    -Dextensions='oidc,keycloak-authorization,resteasy-reactive-jackson' \
    -DnoCode
cd security-keycloak-authorization-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>创建Grade项目，请添加 <code>-DbuildTool=gradle</code> 或者 <code>-DbuildTool=gradle-kotlin-dsl</code> 参数。</p>
</div>
</div>
</div>
<div class="paragraph">
<p>该命令生成一个项目并导入 <code>keycloak-authorization</code> 扩展，该扩展是一个用于Quarkus应用程序的Keycloak适配器的实现，并提供所有必要的功能来与Keycloak服务器集成并执行bearer token授权。</p>
</div>
<div class="paragraph">
<p>如果您已经配置了Quarkus项目，您可以通过在项目根目录中执行以下命令将 <code>oidc</code> 和 <code>keycloak-authorization</code> 扩展添加到您的项目中:</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">CLI</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus extension add 'oidc,keycloak-authorization'</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:add-extension -Dextensions='oidc,keycloak-authorization'</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew addExtension --extensions='oidc,keycloak-authorization'</code></pre>
</div>
</div>
<div class="paragraph">
<p>这会将以下内容添加到你的构建文件中:</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-oidc&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-keycloak-authorization&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation("io.quarkus:quarkus-oidc")
implementation("io.quarkus:quarkus-keycloak-authorization")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s start by implementing the <code>/api/users/me</code> endpoint.
As you can see from the source code below it is just a regular Jakarta REST resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.security.keycloak.authorization;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import org.jboss.resteasy.annotations.cache.NoCache;

import io.quarkus.security.identity.SecurityIdentity;

@Path("/api/users")
public class UsersResource {

    @Inject
    SecurityIdentity identity;

    @GET
    @Path("/me")
    @NoCache
    public User me() {
        return new User(identity);
    }

    public static class User {

        private final String userName;

        User(SecurityIdentity identity) {
            this.userName = identity.getPrincipal().getName();
        }

        public String getUserName() {
            return userName;
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>/api/admin</code> 节点的源代码也非常简单：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.security.keycloak.authorization;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

import io.quarkus.security.Authenticated;

@Path("/api/admin")
@Authenticated
public class AdminResource {

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String admin() {
        return "granted";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>请注意，我们没有定义任何注解，如 <code>@RolesAllowed</code> ，以明确地执行对资源的访问。扩展将负责映射在Keycloak中的受保护资源的URI，并相应地评估权限，然后根据由Keycloak授予的权限来授予或拒绝访问。</p>
</div>
<div class="sect2">
<h3 id="configuring-the-application"><a class="anchor" href="#configuring-the-application"></a>配置该应用程序</h3>
<div class="paragraph">
<p>OpenID Connect扩展允许您使用 <code>application.properties</code> 来定义适配器配置，该文件应位于 <code>src/main/resources</code> 目录下。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># OIDC Configuration
%prod.quarkus.oidc.auth-server-url=https://localhost:8543/realms/quarkus
quarkus.oidc.client-id=backend-service
quarkus.oidc.credentials.secret=secret
quarkus.oidc.tls.verification=none

# Enable Policy Enforcement
quarkus.keycloak.policy-enforcer.enable=true

# Tell Dev Services for Keycloak to import the realm file
# This property is not effective when running the application in JVM or Native modes
quarkus.keycloak.devservices.realm-path=quarkus-realm.json</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Adding a <code>%prod.</code> profile prefix to <code>quarkus.oidc.auth-server-url</code> ensures that <code>Dev Services for Keycloak</code> will launch a container for you when the application is run in a dev mode. See <a href="#keycloak-dev-mode">Running the Application in Dev mode</a> section below for more information.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
默认情况下，使用 <code>quarkus-oidc</code> 扩展的应用程序被标记为 <code>service</code> 类型的应用程序（见 <code>quarkus.oidc.application-type</code> ）。这个扩展也仅支持 <code>web-app</code> 类型的应用程序且只有当作为授权码授予响应的一部分而返回的访问token被标记为角色的来源时可行： <code>quarkus.oidc.roles.source=accesstoken</code> （ <code>web-app</code> 类型的应用程序会默认检查ID token角色）。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-and-configuring-the-keycloak-server"><a class="anchor" href="#starting-and-configuring-the-keycloak-server"></a>启动和配置Keycloak服务器</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Do not start the Keycloak server when you run the application in a dev mode - <code>Dev Services for Keycloak</code> will launch a container. See <a href="#keycloak-dev-mode">Running the Application in Dev mode</a> section below for more information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>要启动Keycloak服务器，您可以使用Docker服务，且只需运行以下命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run --name keycloak -e KEYCLOAK_ADMIN=admin -e KEYCLOAK_ADMIN_PASSWORD=admin -p 8543:8443 -v "$(pwd)"/config/keycloak-keystore.jks:/etc/keycloak-keystore.jks quay.io/keycloak/keycloak:{keycloak.version} start  --hostname-strict=false --https-key-store-file=/etc/keycloak-keystore.jks</code></pre>
</div>
</div>
<div class="paragraph">
<p>其中 <code>keycloak.version</code> 应该设置为 <code>17.0.0</code> 或更高。</p>
</div>
<div class="paragraph">
<p>现在您应该可以在 <a href="https://localhost:8543">localhost:8543</a> 访问您的Keycloak服务器了。</p>
</div>
<div class="paragraph">
<p>以 <code>admin</code> 用户身份登录，访问Keycloak管理控制台。用户名应该是 <code>admin</code> ，密码是 <code>admin</code> 。</p>
</div>
<div class="paragraph">
<p>Import the <a href="https://github.com/quarkusio/quarkus-quickstarts/tree/3.2/security-keycloak-authorization-quickstart/config/quarkus-realm.json">realm configuration file</a> to create a new realm.
For more details, see the Keycloak documentation about how to <a href="https://www.keycloak.org/docs/latest/server_admin/index.html#_create-realm">create a new realm</a>.</p>
</div>
<div class="paragraph">
<p>导入realm后，您可以看到资源的权限：</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/keycloak-authorization-permissions.png" alt="Keycloak Authorization Permissions">
</div>
</div>
<div class="paragraph">
<p>这解释了为什么节点没有 <code>@RolesAllowed</code> 注解&#8212;&#8203;资源访问权限是直接在Keycloak中设置的。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="keycloak-dev-mode"><a class="anchor" href="#keycloak-dev-mode"></a>在开发模式下运行应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>要在开发模式下运行应用程序，请使用：</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">CLI</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew --console=plain quarkusDev</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="security-openid-connect-dev-services.html">Keycloak开发服务</a> 将启动一个Keycloak容器并导入一个 <code>quarkus-realm.json</code> 。</p>
</div>
<div class="paragraph">
<p>Open a <a href="dev-ui">Dev UI</a> available at <a href="http://localhost:8080/q/dev-v1">/q/dev-v1</a> and click on a <code>Provider: Keycloak</code> link in an <code>OpenID Connect</code> <code>Dev UI</code> card.</p>
</div>
<div class="paragraph">
<p>您将被要求登录到由 <code>OpenID Connect Dev UI</code> 提供的 <code>Single Page Application</code> ：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>以 <code>alice</code> （密码： <code>alice</code> ）登录，该用户仅有一个 <code>User Permission</code> 可以访问 <code>/api/users/me</code> 资源</p>
<div class="ulist">
<ul>
<li>
<p>访问 <code>/api/admin</code> ，将返回 <code>403</code></p>
</li>
<li>
<p>访问 <code>/api/users/me</code> ，将返回 <code>200</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>退出并以 <code>admin</code> （密码： <code>admin</code> ）的身份登录，他同时拥有 <code>Admin Permission</code> 以访问 <code>/api/admin</code> 资源以及 <code>User Permission</code> 以访问 <code>/api/users/me</code> 资源</p>
<div class="ulist">
<ul>
<li>
<p>访问 <code>/api/admin</code> ，将返回 <code>200</code></p>
</li>
<li>
<p>访问 <code>/api/users/me</code> ，将返回 <code>200</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-application-in-jvm-mode"><a class="anchor" href="#running-the-application-in-jvm-mode"></a>在JVM模式下运行应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>当您尝试完毕 <code>开发</code> 模式后，您可以把它作为一个标准的Java应用程序运行。</p>
</div>
<div class="paragraph">
<p>首先编译它：</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">CLI</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus build</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw install</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew build</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后运行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar target/quarkus-app/quarkus-run.jar</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-application-in-native-mode"><a class="anchor" href="#running-the-application-in-native-mode"></a>在本地模式下运行应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>这个同样的演示可以被编译成本地代码：不需要任何修改。</p>
</div>
<div class="paragraph">
<p>这意味着您不再需要在您的生产环境中安装JVM，因为运行时技术包含在生产的二进制文件中，并以最小的资源开销优化运行。</p>
</div>
<div class="paragraph">
<p>编译会花一点时间，所以这一步默认是禁用的；让我们通过启用 <code>native</code> profile来再次构建：</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">CLI</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus build --native</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw install -Dnative</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew build -Dquarkus.package.type=native</code></pre>
</div>
</div>
<div class="paragraph">
<p>一杯咖啡的时间后，您就可以直接运行该二进制文件了：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./target/security-keycloak-authorization-quickstart-runner</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-the-application"><a class="anchor" href="#testing-the-application"></a>测试应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="#keycloak-dev-mode">Running the Application in Dev mode</a> section above about testing your application in a dev mode.</p>
</div>
<div class="paragraph">
<p>您可以用 <code>curl</code> 测试在JVM或Native模式下启动的应用程序。</p>
</div>
<div class="paragraph">
<p>该应用程序使用bearer token授权，首先要做的是从Keycloak服务器获得一个访问token，以便访问应用程序资源：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export access_token=$(\
    curl --insecure -X POST https://localhost:8543/realms/quarkus/protocol/openid-connect/token \
    --user backend-service:secret \
    -H 'content-type: application/x-www-form-urlencoded' \
    -d 'username=alice&amp;password=alice&amp;grant_type=password' | jq --raw-output '.access_token' \
 )</code></pre>
</div>
</div>
<div class="paragraph">
<p>上面的命令为用户 <code>alice</code> 获取了一个访问token。</p>
</div>
<div class="paragraph">
<p>任何用户都被允许访问 <code>&lt;a href="http://localhost:8080/api/users/me" class="bare"&gt;<a href="http://localhost:8080/api/users/me&lt;/a&gt" class="bare">http://localhost:8080/api/users/me&lt;/a&gt</a>;</code> 节点，该节点会返回一个包含用户详细信息的JSON payload。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -v -X GET \
  http://localhost:8080/api/users/me \
  -H "Authorization: Bearer "$access_token</code></pre>
</div>
</div>
<div class="paragraph">
<p>该 <code><a href="http://localhost:8080/api/admin" class="bare">http://localhost:8080/api/admin</a></code> 端点只能由具有 <code>admin</code> 角色的用户访问。如果你试图用先前发布的访问令牌访问这个端点，你应该会从服务器上得到一个 <code>403</code> 的响应。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"> curl -v -X GET \
   http://localhost:8080/api/admin \
   -H "Authorization: Bearer "$access_token</code></pre>
</div>
</div>
<div class="paragraph">
<p>为了访问管理节点，您需要获得一个 <code>admin</code> 用户的token：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export access_token=$(\
    curl --insecure -X POST https://localhost:8543/realms/quarkus/protocol/openid-connect/token \
    --user backend-service:secret \
    -H 'content-type: application/x-www-form-urlencoded' \
    -d 'username=admin&amp;password=admin&amp;grant_type=password' | jq --raw-output '.access_token' \
 )</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="injecting-the-authorization-client"><a class="anchor" href="#injecting-the-authorization-client"></a>注入授权客户端</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在某些情况下，您可能想使用 <a href="https://www.keycloak.org/docs/latest/authorization_services/#_service_client_api">Keycloak授权客户端Java API</a> 来执行特定的操作，如管理资源和直接从Keycloak获得权限。为此，您可以按以下方式将一个 <code>AuthzClient</code> 实例注入到您的bean中：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ProtectedResource {
    @Inject
    AuthzClient authzClient;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>注意：如果您想直接使用 <code>AuthzClient</code> ，请确保设置 <code>quarkus.keycloak.policy-enforcer.enable=true</code> ，否则将没有Bean可供注入。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mapping-protected-resources"><a class="anchor" href="#mapping-protected-resources"></a>映射受保护资源</h2>
<div class="sectionbody">
<div class="paragraph">
<p>默认情况下，扩展将从Keycloak按需获取资源，而资源 <code>URI</code> 被用于映射您的应用程序中应被保护的资源。</p>
</div>
<div class="paragraph">
<p>如果您想禁用这种行为，并在启动期间获取资源，您可以使用以下配置：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.keycloak.policy-enforcer.lazy-load-paths=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>请注意，基于您在Keycloak中的资源数量，获取这些资源的时间可能会影响您的应用程序的启动时间。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="more-about-configuring-protected-resources"><a class="anchor" href="#more-about-configuring-protected-resources"></a>关于配置受保护资源的更多信息</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在默认配置中，Keycloak负责管理角色并决定谁可以访问哪些路由。</p>
</div>
<div class="paragraph">
<p>To configure the protected routes using the <code>@RolesAllowed</code> annotation or the <code>application.properties</code> file, check the <a href="security-oidc-bearer-token-authentication">Using OpenID Connect Adapter to Protect Jakarta REST Applications</a> and <a href="security-authorize-web-endpoints-reference">Security Authorization</a> guides. For more details, check the <a href="security-overview">Security guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="access-to-public-resources"><a class="anchor" href="#access-to-public-resources"></a>获取公共资源</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you&#8217;d like to access a public resource without <code>quarkus-keycloak-authorization</code> trying to apply its policies to it then you need to create a <code>permit</code> HTTP Policy configuration in <code>application.properties</code> as documented in the <a href="security-authorize-web-endpoints-reference">Security Authorization</a> guide.</p>
</div>
<div class="paragraph">
<p>使用Keycloak授权策略禁用一个策略检查，如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.keycloak.policy-enforcer.paths.1.path=/api/public
quarkus.keycloak.policy-enforcer.paths.1.enforcement-mode=DISABLED</code></pre>
</div>
</div>
<div class="paragraph">
<p>is no longer required.</p>
</div>
<div class="paragraph">
<p>如果您想阻止匿名用户访问公共资源，那么您可以创建一个强制的Keycloak授权策略：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.keycloak.policy-enforcer.paths.1.path=/api/public-enforcing
quarkus.keycloak.policy-enforcer.paths.1.enforcement-mode=ENFORCING</code></pre>
</div>
</div>
<div class="paragraph">
<p>注意只有在需要控制公共资源的匿名访问时才适用默认租户配置。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="checking-permission-scopes-programmatically"><a class="anchor" href="#checking-permission-scopes-programmatically"></a>Checking Permission Scopes Programmatically</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to resource permissions, you may want to specify method scopes. The scope usually represents an action that
can be performed on a resource. You can create an enforcing Keycloak Authorization Policy with method scope like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># path policy with enforced scope 'read' for method 'GET'
quarkus.keycloak.policy-enforcer.paths.1.name=Scope Permission Resource
quarkus.keycloak.policy-enforcer.paths.1.path=/api/protected/standard-way
quarkus.keycloak.policy-enforcer.paths.1.methods.get.method=GET
quarkus.keycloak.policy-enforcer.paths.1.methods.get.scopes=read <i class="conum" data-value="1"></i><b>(1)</b>

# path policies without scope
quarkus.keycloak.policy-enforcer.paths.2.name=Scope Permission Resource
quarkus.keycloak.policy-enforcer.paths.2.path=/api/protected/programmatic-way
quarkus.keycloak.policy-enforcer.paths.3.name=Scope Permission Resource
quarkus.keycloak.policy-enforcer.paths.3.path=/api/protected/annotation-way</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>User must have resource permission 'Scope Permission Resource' and scope 'read'</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Request path <code>/api/protected/standard-way</code> is now secured by the Keycloak Policy Enforcer and does not require
any additions (such as <code>@RolesAllowed</code> annotation). In some cases, you may want to perform the same check programmatically.
You are allowed to do that by injecting a <code>SecurityIdentity</code> instance in your beans, as demonstrated in the example below.
Alternatively, if you annotate resource method with the <code>@PermissionsAllowed</code> annotation, you can achieve the same effect.
The following example shows three resource method that all requires same 'read' scope:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.security.BasicPermission;
import java.util.List;

import jakarta.inject.Inject;
import jakarta.ws.rs.ForbiddenException;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import org.keycloak.representations.idm.authorization.Permission;

import io.quarkus.security.PermissionsAllowed;
import io.quarkus.security.identity.SecurityIdentity;
import io.smallrye.mutiny.Uni;

@Path("/api/protected")
public class ProtectedResource {

    @Inject
    SecurityIdentity identity;

    @GET
    @Path("/standard-way")
    public Uni&lt;List&lt;Permission&gt;&gt; standardWay() { <i class="conum" data-value="1"></i><b>(1)</b>
        return Uni.createFrom().item(identity.&lt;List&lt;Permission&gt;&gt; getAttribute("permissions"));
    }

    @GET
    @Path("/programmatic-way")
    public Uni&lt;List&lt;Permission&gt;&gt; programmaticWay() {
        var requiredPermission = new BasicPermission("Scope Permission Resource") {
            @Override
            public String getActions() {
                return "read";
            }
        };
        return identity.checkPermission(requiredPermission).onItem() <i class="conum" data-value="2"></i><b>(2)</b>
                .transform(granted -&gt; {
                    if (granted) {
                        return identity.getAttribute("permissions");
                    }
                    throw new ForbiddenException();
                });
    }

    @PermissionsAllowed("Scope Permission Resource:read") <i class="conum" data-value="3"></i><b>(3)</b>
    @GET
    @Path("/annotation-way")
    public Uni&lt;List&lt;Permission&gt;&gt; annotationWay() {
        return Uni.createFrom().item(identity.&lt;List&lt;Permission&gt;&gt; getAttribute("permissions"));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Request sub-path <code>/standard-way</code> requires both resource permission and scope <code>read</code> according to the configuration properties we set in the <code>application.properties</code> before.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Request sub-path <code>/programmatic-way</code> only requires permission <code>Scope Permission Resource</code>, but we can enforce scope with <code>SecurityIdentity#checkPermission</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>@PermissionsAllowed</code> annotation only grants access to the requests with permission <code>Scope Permission Resource</code> and scope <code>read</code>.
For more information, see the section <a href="security-authorize-web-endpoints-reference#standard-security-annotations">Authorization using annotations</a> of the Security Authorization guide.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multi-tenancy"><a class="anchor" href="#multi-tenancy"></a>多租户</h2>
<div class="sectionbody">
<div class="paragraph">
<p>可以配置多个策略执行者的配置，每个租户一个，类似于 <a href="security-openid-connect-multitenancy.html">多租户OpenID连接服务应用程序</a> 的配置方式。</p>
</div>
<div class="paragraph">
<p>例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.keycloak.policy-enforcer.enable=true

# Default Tenant
quarkus.oidc.auth-server-url=${keycloak.url}/realms/quarkus
quarkus.oidc.client-id=quarkus-app
quarkus.oidc.credentials.secret=secret

quarkus.keycloak.policy-enforcer.enforcement-mode=PERMISSIVE
quarkus.keycloak.policy-enforcer.paths.1.name=Permission Resource
quarkus.keycloak.policy-enforcer.paths.1.path=/api/permission
quarkus.keycloak.policy-enforcer.paths.1.claim-information-point.claims.static-claim=static-claim

# Service Tenant

quarkus.oidc.service-tenant.auth-server-url=${keycloak.url}/realms/quarkus
quarkus.oidc.service-tenant.client-id=quarkus-app
quarkus.oidc.service-tenant.credentials.secret=secret

quarkus.keycloak.service-tenant.policy-enforcer.enforcement-mode=PERMISSIVE
quarkus.keycloak.service-tenant.policy-enforcer.paths.1.name=Permission Resource Service
quarkus.keycloak.service-tenant.policy-enforcer.paths.1.path=/api/permission
quarkus.keycloak.service-tenant.policy-enforcer.paths.1.claim-information-point.claims.static-claim=static-claim


# WebApp Tenant

quarkus.oidc.webapp-tenant.auth-server-url=${keycloak.url}/realms/quarkus
quarkus.oidc.webapp-tenant.client-id=quarkus-app
quarkus.oidc.webapp-tenant.credentials.secret=secret
quarkus.oidc.webapp-tenant.application-type=web-app
quarkus.oidc.webapp-tenant.roles.source=accesstoken

quarkus.keycloak.webapp-tenant.policy-enforcer.enforcement-mode=PERMISSIVE
quarkus.keycloak.webapp-tenant.policy-enforcer.paths.1.name=Permission Resource WebApp
quarkus.keycloak.webapp-tenant.policy-enforcer.paths.1.path=/api/permission
quarkus.keycloak.webapp-tenant.policy-enforcer.paths.1.claim-information-point.claims.static-claim=static-claim</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-reference"><a class="anchor" href="#configuration-reference"></a>配置参考</h2>
<div class="sectionbody">
<div class="paragraph">
<p>以下配置基于官方文档 <a href="https://www.keycloak.org/docs/latest/authorization_services/index.html#_enforcer_filter">Keycloak Policy Enforcer Configuration</a>。如果您想要查看不同配置选项的更多细节，请参看该文档,</p>
</div>
<div class="paragraph configuration-legend">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> Configuration property fixed at build time - All other configuration properties are overridable at runtime</p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference configuration-reference-all-rows">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-keycloak-keycloak-policy-enforcer-config_configuration"></a><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_configuration">Configuration property</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">类型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">默认值</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-connection-pool-size"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-connection-pool-size">quarkus.keycloak.connection-pool-size</a></code></p>
</div>
<div id="conf-collapsible-desc-1" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Adapters will make separate HTTP invocations to the Keycloak server to turn an access code into an access token. This config option defines how many connections to the Keycloak server should be pooled</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39183">QUARKUS_KEYCLOAK_CONNECTION_POOL_SIZE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39183" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>20</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-enforcement-mode"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-enforcement-mode">quarkus.keycloak.policy-enforcer.enforcement-mode</a></code></p>
</div>
<div id="conf-collapsible-desc-2" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Specifies how policies are enforced.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39184">QUARKUS_KEYCLOAK_POLICY_ENFORCER_ENFORCEMENT_MODE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39184" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>permissive</code>, <code>enforcing</code>, <code>disabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>enforcing</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-path-cache-max-entries"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-path-cache-max-entries">quarkus.keycloak.policy-enforcer.path-cache.max-entries</a></code></p>
</div>
<div id="conf-collapsible-desc-3" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Defines the limit of entries that should be kept in the cache</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39185">QUARKUS_KEYCLOAK_POLICY_ENFORCER_PATH_CACHE_MAX_ENTRIES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39185" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1000</code> </p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-path-cache-lifespan"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-path-cache-lifespan">quarkus.keycloak.policy-enforcer.path-cache.lifespan</a></code></p>
</div>
<div id="conf-collapsible-desc-4" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Defines the time in milliseconds when the entry should be expired</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39186">QUARKUS_KEYCLOAK_POLICY_ENFORCER_PATH_CACHE_LIFESPAN</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39186" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>30000</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-lazy-load-paths"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-lazy-load-paths">quarkus.keycloak.policy-enforcer.lazy-load-paths</a></code></p>
</div>
<div id="conf-collapsible-desc-5" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Specifies how the adapter should fetch the server for resources associated with paths in your application. If true, the policy enforcer is going to fetch resources on-demand accordingly with the path being requested</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39187">QUARKUS_KEYCLOAK_POLICY_ENFORCER_LAZY_LOAD_PATHS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39187" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code> </p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-http-method-as-scope"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-http-method-as-scope">quarkus.keycloak.policy-enforcer.http-method-as-scope</a></code></p>
</div>
<div id="conf-collapsible-desc-6" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Specifies how scopes should be mapped to HTTP methods. If set to true, the policy enforcer will use the HTTP method from the current request to check whether access should be granted</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39188">QUARKUS_KEYCLOAK_POLICY_ENFORCER_HTTP_METHOD_AS_SCOPE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39188" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code> </p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-name"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-name">quarkus.keycloak.policy-enforcer.paths."paths".name</a></code></p>
</div>
<div id="conf-collapsible-desc-7" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The name of a resource on the server that is to be associated with a given path</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39189">QUARKUS_KEYCLOAK_POLICY_ENFORCER_PATHS__PATHS__NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39189" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-path"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-path">quarkus.keycloak.policy-enforcer.paths."paths".path</a></code></p>
</div>
<div id="conf-collapsible-desc-8" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>A URI relative to the application’s context path that should be protected by the policy enforcer</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39190">QUARKUS_KEYCLOAK_POLICY_ENFORCER_PATHS__PATHS__PATH</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39190" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-methods-methods-method"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-methods-methods-method">quarkus.keycloak.policy-enforcer.paths."paths".methods."methods".method</a></code></p>
</div>
<div id="conf-collapsible-desc-9" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The name of the HTTP method</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39191">QUARKUS_KEYCLOAK_POLICY_ENFORCER_PATHS__PATHS__METHODS__METHODS__METHOD</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39191" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">required <span class="icon"><i class="fa fa-exclamation-circle" title="Configuration property is required"></i></span></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-methods-methods-scopes"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-methods-methods-scopes">quarkus.keycloak.policy-enforcer.paths."paths".methods."methods".scopes</a></code></p>
</div>
<div id="conf-collapsible-desc-10" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>An array of strings with the scopes associated with the method</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39192">QUARKUS_KEYCLOAK_POLICY_ENFORCER_PATHS__PATHS__METHODS__METHODS__SCOPES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39192" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">required <span class="icon"><i class="fa fa-exclamation-circle" title="Configuration property is required"></i></span></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-methods-methods-scopes-enforcement-mode"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-methods-methods-scopes-enforcement-mode">quarkus.keycloak.policy-enforcer.paths."paths".methods."methods".scopes-enforcement-mode</a></code></p>
</div>
<div id="conf-collapsible-desc-11" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>A string referencing the enforcement mode for the scopes associated with a method</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39193">QUARKUS_KEYCLOAK_POLICY_ENFORCER_PATHS__PATHS__METHODS__METHODS__SCOPES_ENFORCEMENT_MODE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39193" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>all</code>, <code>any</code>, <code>disabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>all</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-enforcement-mode"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-enforcement-mode">quarkus.keycloak.policy-enforcer.paths."paths".enforcement-mode</a></code></p>
</div>
<div id="conf-collapsible-desc-12" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Specifies how policies are enforced</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39194">QUARKUS_KEYCLOAK_POLICY_ENFORCER_PATHS__PATHS__ENFORCEMENT_MODE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39194" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>permissive</code>, <code>enforcing</code>, <code>disabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>enforcing</code></p></td>
</tr>
<tr class=" odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-claim-information-point-complex-config"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-claim-information-point-complex-config">quarkus.keycloak.policy-enforcer.paths."paths".claim-information-point</a></code></p>
</div>
<div id="conf-non-collapsible-desc-13" class="openblock description">
<div class="content">
<div class="paragraph">
<p>Environment variable: <code id="env-var-39195">QUARKUS_KEYCLOAK_POLICY_ENFORCER_PATHS__PATHS__CLAIM_INFORMATION_POINT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39195" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Map&lt;String,Map&lt;String,Map&lt;String,String&gt;&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-claim-information-point-simple-config"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-paths-paths-claim-information-point-simple-config">quarkus.keycloak.policy-enforcer.paths."paths".claim-information-point</a></code></p>
</div>
<div id="conf-non-collapsible-desc-14" class="openblock description">
<div class="content">
<div class="paragraph">
<p>Environment variable: <code id="env-var-39196">QUARKUS_KEYCLOAK_POLICY_ENFORCER_PATHS__PATHS__CLAIM_INFORMATION_POINT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39196" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Map&lt;String,Map&lt;String,String&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class=" odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-claim-information-point-complex-config"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-claim-information-point-complex-config">quarkus.keycloak.policy-enforcer.claim-information-point</a></code></p>
</div>
<div id="conf-non-collapsible-desc-15" class="openblock description">
<div class="content">
<div class="paragraph">
<p>Environment variable: <code id="env-var-39197">QUARKUS_KEYCLOAK_POLICY_ENFORCER_CLAIM_INFORMATION_POINT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39197" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Map&lt;String,Map&lt;String,Map&lt;String,String&gt;&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-claim-information-point-simple-config"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-policy-enforcer-claim-information-point-simple-config">quarkus.keycloak.policy-enforcer.claim-information-point</a></code></p>
</div>
<div id="conf-non-collapsible-desc-16" class="openblock description">
<div class="content">
<div class="paragraph">
<p>Environment variable: <code id="env-var-39198">QUARKUS_KEYCLOAK_POLICY_ENFORCER_CLAIM_INFORMATION_POINT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39198" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Map&lt;String,Map&lt;String,String&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-named-tenants-additional-named-tenants"></a><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-named-tenants-additional-named-tenants">Additional named tenants</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">类型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">默认值</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-connection-pool-size"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-connection-pool-size">quarkus.keycloak."tenant".connection-pool-size</a></code></p>
</div>
<div id="conf-collapsible-desc-17" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Adapters will make separate HTTP invocations to the Keycloak server to turn an access code into an access token. This config option defines how many connections to the Keycloak server should be pooled</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39199">QUARKUS_KEYCLOAK__TENANT__CONNECTION_POOL_SIZE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39199" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>20</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-enforcement-mode"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-enforcement-mode">quarkus.keycloak."tenant".policy-enforcer.enforcement-mode</a></code></p>
</div>
<div id="conf-collapsible-desc-18" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Specifies how policies are enforced.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39200">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_ENFORCEMENT_MODE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39200" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>permissive</code>, <code>enforcing</code>, <code>disabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>enforcing</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-name"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-name">quarkus.keycloak."tenant".policy-enforcer.paths."paths".name</a></code></p>
</div>
<div id="conf-collapsible-desc-19" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The name of a resource on the server that is to be associated with a given path</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39201">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_PATHS__PATHS__NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39201" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-path"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-path">quarkus.keycloak."tenant".policy-enforcer.paths."paths".path</a></code></p>
</div>
<div id="conf-collapsible-desc-20" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>A URI relative to the application’s context path that should be protected by the policy enforcer</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39202">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_PATHS__PATHS__PATH</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39202" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-methods-methods-method"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-methods-methods-method">quarkus.keycloak."tenant".policy-enforcer.paths."paths".methods."methods".method</a></code></p>
</div>
<div id="conf-collapsible-desc-21" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The name of the HTTP method</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39203">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_PATHS__PATHS__METHODS__METHODS__METHOD</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39203" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">required <span class="icon"><i class="fa fa-exclamation-circle" title="Configuration property is required"></i></span></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-methods-methods-scopes"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-methods-methods-scopes">quarkus.keycloak."tenant".policy-enforcer.paths."paths".methods."methods".scopes</a></code></p>
</div>
<div id="conf-collapsible-desc-22" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>An array of strings with the scopes associated with the method</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39204">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_PATHS__PATHS__METHODS__METHODS__SCOPES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39204" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">required <span class="icon"><i class="fa fa-exclamation-circle" title="Configuration property is required"></i></span></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-methods-methods-scopes-enforcement-mode"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-methods-methods-scopes-enforcement-mode">quarkus.keycloak."tenant".policy-enforcer.paths."paths".methods."methods".scopes-enforcement-mode</a></code></p>
</div>
<div id="conf-collapsible-desc-23" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>A string referencing the enforcement mode for the scopes associated with a method</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39205">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_PATHS__PATHS__METHODS__METHODS__SCOPES_ENFORCEMENT_MODE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39205" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>all</code>, <code>any</code>, <code>disabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>all</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-enforcement-mode"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-enforcement-mode">quarkus.keycloak."tenant".policy-enforcer.paths."paths".enforcement-mode</a></code></p>
</div>
<div id="conf-collapsible-desc-24" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Specifies how policies are enforced</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39206">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_PATHS__PATHS__ENFORCEMENT_MODE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39206" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>permissive</code>, <code>enforcing</code>, <code>disabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>enforcing</code></p></td>
</tr>
<tr class=" odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-claim-information-point-complex-config"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-claim-information-point-complex-config">quarkus.keycloak."tenant".policy-enforcer.paths."paths".claim-information-point</a></code></p>
</div>
<div id="conf-non-collapsible-desc-25" class="openblock description">
<div class="content">
<div class="paragraph">
<p>Environment variable: <code id="env-var-39207">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_PATHS__PATHS__CLAIM_INFORMATION_POINT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39207" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Map&lt;String,Map&lt;String,Map&lt;String,String&gt;&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-claim-information-point-simple-config"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-paths-paths-claim-information-point-simple-config">quarkus.keycloak."tenant".policy-enforcer.paths."paths".claim-information-point</a></code></p>
</div>
<div id="conf-non-collapsible-desc-26" class="openblock description">
<div class="content">
<div class="paragraph">
<p>Environment variable: <code id="env-var-39208">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_PATHS__PATHS__CLAIM_INFORMATION_POINT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39208" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Map&lt;String,Map&lt;String,String&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-path-cache-max-entries"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-path-cache-max-entries">quarkus.keycloak."tenant".policy-enforcer.path-cache.max-entries</a></code></p>
</div>
<div id="conf-collapsible-desc-27" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Defines the limit of entries that should be kept in the cache</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39209">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_PATH_CACHE_MAX_ENTRIES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39209" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1000</code> </p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-path-cache-lifespan"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-path-cache-lifespan">quarkus.keycloak."tenant".policy-enforcer.path-cache.lifespan</a></code></p>
</div>
<div id="conf-collapsible-desc-28" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Defines the time in milliseconds when the entry should be expired</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39210">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_PATH_CACHE_LIFESPAN</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39210" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>30000</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-lazy-load-paths"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-lazy-load-paths">quarkus.keycloak."tenant".policy-enforcer.lazy-load-paths</a></code></p>
</div>
<div id="conf-collapsible-desc-29" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Specifies how the adapter should fetch the server for resources associated with paths in your application. If true, the policy enforcer is going to fetch resources on-demand accordingly with the path being requested</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39211">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_LAZY_LOAD_PATHS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39211" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code> </p></td>
</tr>
<tr class="">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-claim-information-point-complex-config"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-claim-information-point-complex-config">quarkus.keycloak."tenant".policy-enforcer.claim-information-point</a></code></p>
</div>
<div id="conf-non-collapsible-desc-30" class="openblock description">
<div class="content">
<div class="paragraph">
<p>Environment variable: <code id="env-var-39212">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_CLAIM_INFORMATION_POINT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39212" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Map&lt;String,Map&lt;String,Map&lt;String,String&gt;&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class=" row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-claim-information-point-simple-config"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-claim-information-point-simple-config">quarkus.keycloak."tenant".policy-enforcer.claim-information-point</a></code></p>
</div>
<div id="conf-non-collapsible-desc-31" class="openblock description">
<div class="content">
<div class="paragraph">
<p>Environment variable: <code id="env-var-39213">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_CLAIM_INFORMATION_POINT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39213" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Map&lt;String,Map&lt;String,String&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-http-method-as-scope"></a><code><a href="#quarkus-keycloak-keycloak-policy-enforcer-config_quarkus-keycloak-tenant-policy-enforcer-http-method-as-scope">quarkus.keycloak."tenant".policy-enforcer.http-method-as-scope</a></code></p>
</div>
<div id="conf-collapsible-desc-32" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Specifies how scopes should be mapped to HTTP methods. If set to true, the policy enforcer will use the HTTP method from the current request to check whether access should be granted</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-39214">QUARKUS_KEYCLOAK__TENANT__POLICY_ENFORCER_HTTP_METHOD_AS_SCOPE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-39214" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code> </p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>参考文献</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.keycloak.org/documentation.html">Keycloak Documentation</a></p>
</li>
<li>
<p><a href="https://www.keycloak.org/docs/latest/authorization_services/index.html">Keycloak Authorization Services Documentation</a></p>
</li>
<li>
<p><a href="https://openid.net/connect/">OpenID Connect</a></p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7519">JSON Web Token</a></p>
</li>
<li>
<p><a href="security-overview">Quarkus Security overview</a></p>
</li>
<li>
<p><a href="security-keycloak-admin-client">Quarkus Keycloak Admin Client</a></p>
</li>
</ul>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#prerequisites">先决条件</a></li>
<li><a href="#architecture">架构</a></li>
<li><a href="#solution">解决方案</a></li>
<li><a href="#creating-the-project">创建项目</a>
<ul class="sectlevel2">
<li><a href="#configuring-the-application">配置该应用程序</a></li>
</ul>
</li>
<li><a href="#starting-and-configuring-the-keycloak-server">启动和配置Keycloak服务器</a></li>
<li><a href="#keycloak-dev-mode">在开发模式下运行应用程序</a></li>
<li><a href="#running-the-application-in-jvm-mode">在JVM模式下运行应用程序</a></li>
<li><a href="#running-the-application-in-native-mode">在本地模式下运行应用程序</a></li>
<li><a href="#testing-the-application">测试应用程序</a></li>
<li><a href="#injecting-the-authorization-client">注入授权客户端</a></li>
<li><a href="#mapping-protected-resources">映射受保护资源</a></li>
<li><a href="#more-about-configuring-protected-resources">关于配置受保护资源的更多信息</a></li>
<li><a href="#access-to-public-resources">获取公共资源</a></li>
<li><a href="#checking-permission-scopes-programmatically">Checking Permission Scopes Programmatically</a></li>
<li><a href="#multi-tenancy">多租户</a></li>
<li><a href="#configuration-reference">配置参考</a></li>
<li><a href="#references">参考文献</a></li>
</ul></div>
    </div>
  </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">博客</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">活动</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">新闻</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">路线图</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">开始体验</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>
