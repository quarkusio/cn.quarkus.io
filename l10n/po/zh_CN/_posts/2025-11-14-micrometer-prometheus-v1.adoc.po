msgid ""
msgstr ""
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Generator: jekyll-l10n\n"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Quarkus Micrometer using Prometheus client v1"
msgstr "使用 Prometheus 客户端 v1 的 Quarkus 千分尺"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Micrometer has moved to use the Prometheus client v1. This post explains the migration path and required changes for applications."
msgstr "Micrometer 已转向使用 Prometheus 客户端 v1。本文章将解释迁移路径和应用程序所需的更改。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid ""
"Micrometer adopted Prometheus Client v1.x starting with version 1.13. However, Quarkus still uses Prometheus Client v0.x by default through the `quarkus-micrometer-registry-prometheus` extension which has been using the legacy `io.prometheus:simpleclient`.\n"
"This is now considered *deprecated* and will not be part of the future Quarkus 4.x version (still no timeline)."
msgstr "Micrometer 从 1.13 版开始采用 Prometheus Client v1.x。不过，Quarkus 默认仍通过 `quarkus-micrometer-registry-prometheus` 扩展使用 Prometheus Client v0.x，该扩展一直使用传统的 `io.prometheus:simpleclient` 。现在，该扩展已被视为 *过时* ，将不会成为未来 Quarkus 4.x 版本的一部分（仍然没有时间表）。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "In parallel, we have introduced a new extension in Quarkiverse: https://docs.quarkiverse.io/quarkus-micrometer-registry/dev/micrometer-registry-prometheus-v1.html[`quarkus-micrometer-registry-prometheus-v1`], which integrates the new v1.x client."
msgstr "与此同时，我们还在 Quarkiverse 中引入了一个新的扩展： link:https://docs.quarkiverse.io/quarkus-micrometer-registry/dev/micrometer-registry-prometheus-v1.html[quarkus-micrometer-registry-prometheus-v1] ，它集成了新的 v1.x 客户端。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Since the new client introduces *breaking changes*, we’ve prepared a migration plan designed to reduce the impact on existing users."
msgstr "由于新客户端会带来一些 *突破性的变化* ，因此我们准备了一个迁移计划，旨在减少对现有用户的影响。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid ""
"Some of the changes affect the names of some metrics. This requires queries and dashboards to be updated in order to continue working.\n"
"Users should evaluate the impacts for their projects before moving to the new `quarkus-micrometer-registry-prometheus-v1` extension."
msgstr "其中一些更改会影响某些指标的名称。这就需要更新查询和仪表盘才能继续工作。用户在迁移到新的 `quarkus-micrometer-registry-prometheus-v1` 扩展名之前，应评估对其项目的影响。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "The old and the new extension should not be used at the same time as the both require the `/q/metrics` endpoint."
msgstr "新旧扩展不应同时使用，因为两者都需要 `/q/metrics` 端点。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Migrating to the new extension"
msgstr "迁移到新扩展"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Users can keep current extension as is until Quarkus 4.0 allowing them to migrate at a time of their choice."
msgstr "用户可以在 Quarkus 4.0 之前保留当前扩展，以便在自己选择的时间进行迁移。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "We are introducing the new extension https://docs.quarkiverse.io/quarkus-micrometer-registry/dev/micrometer-registry-prometheus-v1.html[`quarkus-micrometer-registry-prometheus-v1`] and users can start migrating their projects to it right now."
msgstr "我们将推出新的扩展 link:https://docs.quarkiverse.io/quarkus-micrometer-registry/dev/micrometer-registry-prometheus-v1.html[quarkus-micrometer-registry-prometheus-v1] 用户现在就可以开始将他们的项目迁移到该扩展。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "For Quarkus 4.0 we will introduce the following changes:"
msgstr "在 Quarkus 4.0 中，我们将引入以下更改："

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "The deprecated `quarkus-micrometer-registry-prometheus` extension will be moved from Quarkus core repo to Quarkiverse, allowing an additional migration period."
msgstr "已废弃的 `quarkus-micrometer-registry-prometheus` 扩展将从 Quarkus 核心软件仓库移至 Quarkiverse，以便有更多的迁移时间。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "The new https://docs.quarkiverse.io/quarkus-micrometer-registry/dev/micrometer-registry-prometheus-v1.html[`quarkus-micrometer-registry-prometheus-v1`] extension will be moved from Quarkiverse to Quarkus core repo, making it the default registry."
msgstr "新的 link:https://docs.quarkiverse.io/quarkus-micrometer-registry/dev/micrometer-registry-prometheus-v1.html[quarkus-micrometer-registry-prometheus-v1] 扩展将从 Quarkiverse 移至 Quarkus 核心软件仓库，使其成为默认注册表。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Breaking changes"
msgstr "突破性变化"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "As mentioned above, the new extension comes with a set of breaking changes."
msgstr "如上文所述，新扩展附带了一系列破坏性更改。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Prometheus client v1"
msgstr "普罗米修斯客户端 v1"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "The `quarkus-micrometer-registry-prometheus-v1` extension will be using the Prometheus Client v1.x and includes *breaking changes* expressed in detail on the https://github.com/micrometer-metrics/micrometer/wiki/1.13-Migration-Guide[Micrometer 1.13 Migration Guide], featuring package, API and semantic convention changes."
msgstr "`quarkus-micrometer-registry-prometheus-v1` 扩展将使用 Prometheus Client v1.x，并包含 link:https://github.com/micrometer-metrics/micrometer/wiki/1.13-Migration-Guide[Micrometer 1.13 移植指南] 中详细说明的 *破坏性更改* ，包括软件包、应用程序接口和语义约定的更改。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "These are the main points to consider when migrating to the new Quarkus extension:"
msgstr "这些是迁移到新 Quarkus 扩展时需要考虑的要点："

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Counters now use Longs instead of Doubles."
msgstr "计数器现在使用长数而不是双数。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Before: `\"registry=\\\"prometheus\\\",status=\\\"200\\\",uri=\\\"/example/prime/{number}\\\"} 2.0`"
msgstr "之前 `\"registry=\\\"prometheus\\\",status=\\\"200\\\",uri=\\\"/example/prime/{number}\\\"} 2.0`"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Now: `\"registry=\\\"prometheus\\\",status=\\\"200\\\",uri=\\\"/example/prime/{number}\\\"} 2`"
msgstr "现在 `\"registry=\\\"prometheus\\\",status=\\\"200\\\",uri=\\\"/example/prime/{number}\\\"} 2`"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "`io.micrometer.prometheusmetrics.PrometheusMeterRegistry` must be used instead of the old `io.micrometer.prometheus.PrometheusMeterRegistry`."
msgstr "`io.micrometer.prometheusmetrics.PrometheusMeterRegistry` 必须取代旧的 `io.micrometer.prometheus.PrometheusMeterRegistry` 。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "`io.prometheus.metrics.tracer.common.SpanContext` must be used instead of the old `io.prometheus.client.exemplars.ExemplarSampler`"
msgstr "`io.prometheus.metrics.tracer.common.SpanContext` 必须使用 `io.prometheus.client.exemplars.ExemplarSampler`"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "The new Prometheus client uses some reserved words that must not be used to name metrics, therefore some metrics were renamed. Some examples of reserved words and renamed metrics:"
msgstr "新的 Prometheus 客户端使用了一些不得用于命名度量指标的保留字，因此对一些度量指标进行了重命名。保留字和重命名度量指标的一些示例："

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "`info`. Before: `jvm_info_total`. Now: `jvm_total`"
msgstr "`info` .以前： `jvm_info_total` .现在 `jvm_total`"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "`duration`. Before: `http_server_requests_duration_seconds`. Now: `http_server_requests_seconds`"
msgstr "`duration` .以前： `http_server_requests_duration_seconds` .现在 `http_server_requests_seconds`"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Some metrics would display Tags ending in a comma (`,`). This tailing comma has now been removed. Example: `hibernate_flushes_total{entityManagerFactory=\\\"<default>\\\",env=\\\"test\\\",env2=\\\"test\\\",registry=\\\"prometheus\\\",} 1.0`"
msgstr "某些度量指标会显示以逗号 ( `,` ) 结尾的标签。现在这个尾部逗号已被删除。例如 `hibernate_flushes_total{entityManagerFactory=\\\"<default>\\\",env=\\\"test\\\",env2=\\\"test\\\",registry=\\\"prometheus\\\",} 1.0`"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "It is no longer possible to create a metric generating Service Level Objectives and Percentiles at the same time."
msgstr "不再可能同时创建生成服务级别目标和百分比的指标。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Change when registering metrics:"
msgstr "在注册度量标准时进行更改："

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Metrics must be registered always with the same tags. Micrometer will now send a warning if we register the same metric more than once with different Tag names."
msgstr "度量衡必须始终使用相同的标记进行注册。如果我们用不同的标记名多次注册同一个度量表，Micrometer 现在会发出警告。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Implementation changes"
msgstr "实施方面的变化"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Quarkus automatic instrumentation will generate metrics reflecting these changes. If your application defines custom metrics, be sure to update their creation, associated tests, and any dashboard queries to align with the guidelines above."
msgstr "Quarkus 自动仪器将生成反映这些变化的指标。如果您的应用程序定义了自定义指标，请务必更新其创建、相关测试和任何仪表板查询，以便与上述指南保持一致。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "About metrics in Quarkus"
msgstr "关于夸克斯的度量"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "The https://quarkus.io/guides/telemetry-micrometer[Micrometer extension] is the recommended approach to generate metrics in Quarkus and this a rare occasions were breaking changes are being introduced."
msgstr "link:https://quarkus.io/guides/telemetry-micrometer[Micrometer 扩展] 是在 Quarkus 中生成度量指标的推荐方法，这在极少数情况下会引入破坏性更改。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Micrometer has become the default metrics framework in Quarkus due to its stability, maturity, and widespread adoption on the Java ecosystem — not https://quarkus.io/guides/opentelemetry-metrics[OpenTelemetry Metrics]."
msgstr "由于 Micrometer 的稳定性、成熟度以及在 Java 生态系统中的广泛应用，它已成为 Quarkus 的默认度量框架，而不是 link:https://quarkus.io/guides/opentelemetry-metrics[OpenTelemetry Metrics] 。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Micrometer integration in Quarkus is provided through the core quarkus-micrometer` extension. Specific registry extensions depend on this core extension and implement their own registries to export telemetry data. The Prometheus registry (`quarkus-micrometer-registry-prometheus`) is the default and most commonly used, and it is the focus of this announcement."
msgstr "Quarkus 中的测微计集成是通过核心的 quarkus-micrometer` 扩展提供的。特定的注册表扩展依赖于这个核心扩展，并实现自己的注册表来导出遥测数据。Prometheus 注册表 ( `quarkus-micrometer-registry-prometheus` ) 是默认的，也是最常用的，是本公告的重点。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "However, there are alternative ways to export metrics using Micrometer:"
msgstr "不过，使用 Micrometer 也有其他导出指标的方法："

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Through the https://github.com/quarkiverse/quarkus-micrometer-registry/[Quarkiverse Micrometer registries]"
msgstr "通过 link:https://github.com/quarkiverse/quarkus-micrometer-registry/[夸克宇宙千分尺注册表]"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "Via OpenTelemetry, using a bridge provided by the https://quarkus.io/guides/telemetry-micrometer-to-opentelemetry[Micrometer and OpenTelemetry] extension. This setup allows Micrometer metrics to be sent as OpenTelemetry metrics, offering a unified output via the https://opentelemetry.io/docs/specs/otlp/[OpenTelemetry OTLP protocol]."
msgstr "通过 OpenTelemetry，使用 link:https://quarkus.io/guides/telemetry-micrometer-to-opentelemetry[Micrometer 和 OpenTelemetry] 扩展提供的桥接。这种设置可将 Micrometer 指标作为 OpenTelemetry 指标发送，通过 link:https://opentelemetry.io/docs/specs/otlp/[OpenTelemetry OTLP 协议] 提供统一的输出。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "For more details on Observability in Quarkus please visit https://quarkus.io/guides/observability[this guide]."
msgstr "有关 Quarkus 中可观察性的更多详情，请访问 link:https://quarkus.io/guides/observability[本指南] 。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Conclusion"
msgstr "解决方案"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "While the existing Prometheus registry remains available for the Quarkus 3.x lifecycle, it is now deprecated, and users are encouraged to begin migrating to the new extension because the old client extension will be removed on Quarkus 4.0 (no timeline at this moment)."
msgstr "尽管现有的 Prometheus 注册表在 Quarkus 3.x 生命周期中仍然可用，但现在已经过时，我们鼓励用户开始迁移到新的扩展，因为旧的客户端扩展将在 Quarkus 4.0 中移除（目前还没有时间表）。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "This change introduces a number of breaking updates aligned with Micrometer 1.13 and Prometheus Client v1.x, affecting metric types, naming conventions, and APIs."
msgstr "此更改引入了大量与 Micrometer 1.13 和 Prometheus Client v1.x 一致的破坏性更新，影响了度量衡类型、命名约定和 API。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "To support users, a migration plan has been outlined to provide flexibility and minimize disruption."
msgstr "为了向用户提供支持，已制定了一项迁移计划，以提供灵活性并尽量减少中断。"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
#, fuzzy
msgid "The prometheus client is not the only option to send out telemetry, there are alternative options such as the Quarkiverse registries or our OpenTelemetry bridge."
msgstr "prometheus 客户端不是发送遥测数据的唯一选择，还有其他选择，如 Quarkiverse 注册表或我们的 OpenTelemetry 桥接器。"
