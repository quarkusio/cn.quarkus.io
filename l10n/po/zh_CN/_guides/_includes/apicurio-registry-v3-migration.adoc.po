msgid ""
msgstr ""
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Generator: jekyll-l10n\n"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Migrating from Apicurio Registry 2.x to 3.x"
msgstr "从 Apicurio Registry 2.x 迁移到 3.x"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"Apicurio Registry 3.x introduces a **breaking change in schema ID format** "
"from 8-byte (long) to 4-byte (int) identifiers.\n"
"This affects message compatibility between v2 and v3 producers/consumers."
msgstr ""
"Apicurio Registry 3.x *在模式 ID 格式方面* 引入了一项 *突破性变更* ，即从 8 字节（长）标识符 *变更* 为 4 "
"字节（int）标识符。这将影响 v2 和 v3 生产者/消费者之间的信息兼容性。"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Schema ID Format Change"
msgstr "模式 ID 格式更改"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"Apicurio Registry 3.x changed the schema ID format from **8-byte (long)** to "
"**4-byte (int)** identifiers.\n"
"This means messages produced with v2 cannot be consumed by v3 applications "
"(and vice versa) without explicit configuration."
msgstr ""
"Apicurio Registry 3.x 将模式 ID 格式从 *8 字节（长）* 标识符改为 *4 字节（int）* "
"标识符。这意味着在没有明确配置的情况下，使用 v2 生成的信息无法被 v3 应用程序使用（反之亦然）。"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Migration Scenarios"
msgstr "迁移方案"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"**New applications (no existing v2 messages):** No configuration needed. The "
"v3 defaults will be used automatically."
msgstr "*新应用程序（无现有 v2 信息）：* 无需配置。将自动使用 v3 默认值。"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"**Consuming existing v2 messages:** Configure the `Legacy8ByteIdHandler` for "
"channels that need to read v2-produced messages:"
msgstr "*使用现有的 v2 报文：* 为需要读取 v2 生成的报文的通道配置 `Legacy8ByteIdHandler` ："

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"**Producing v2-compatible messages:** If downstream consumers still use v2, "
"configure the producer:"
msgstr "*生成与 v2 兼容的报文：* 如果下游消费者仍在使用 v2，请配置生产者："

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Standard ID Handlers: Fixed Format"
msgstr "标准 ID 处理程序：固定格式"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"Both v2 (8-byte) and v3 (4-byte) formats use the same magic byte.\n"
"The standard ID handlers (`Legacy8ByteIdHandler` and "
"`Default4ByteIdHandler`) read a fixed number of bytes based on "
"configuration—there is no per-message auto-detection."
msgstr ""
"v2 格式（8 字节）和 v3 格式（4 字节）都使用相同的神奇字节。标准 ID 处理程序（ `Legacy8ByteIdHandler` 和 "
"`Default4ByteIdHandler` ）根据配置读取固定的字节数，不存在按报文自动检测的功能。"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"If a single topic contains mixed messages (some with 8-byte IDs, some with 4-"
"byte IDs), consumers using standard ID handlers will fail.\n"
"A consumer configured with `Legacy8ByteIdHandler` always reads 8 bytes; one "
"with `Default4ByteIdHandler` always reads 4 bytes.\n"
"Mismatches cause corruption or deserialization errors."
msgstr ""
"如果单个主题包含混合报文（有些报文的 ID 是 8 字节，有些是 4 字节），那么使用标准 ID 处理程序的消费者就会失败。配置为 "
"`Legacy8ByteIdHandler` 的消费者总是读取 8 字节；配置为 `Default4ByteIdHandler` 的消费者总是读取 4 "
"字节。不匹配会导致损坏或反序列化错误。"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "**With standard ID handlers, gradual migration only works when:**"
msgstr "*使用标准 ID 处理程序时，只有在以下情况下，渐进迁移才会起作用：*"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Each topic has messages in ONE format (either v2 or v3, not both)"
msgstr "每个主题只有一种格式的信息（v2 或 v3，不能同时使用两种格式）"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Per-channel configuration routes each topic to the correct ID handler"
msgstr "每个通道配置将每个主题路由到正确的 ID 处理程序"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"You can have producers and consumers using both formats in the same Apicurio "
"Registry instance, but not mixing them in the same topic."
msgstr "在同一个 Apicurio Registry 实例中，生产者和消费者可以同时使用两种格式，但不能在同一个主题中混合使用。"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"For topics with mixed v2/v3 messages, consider using the "
"`OptimisticFallbackIdHandler` described in the <<Optimistic Fallback ID "
"Handler>> section."
msgstr ""
"对于 v2/v3 混合信息的主题，可考虑使用 <<Optimistic Fallback ID Handler>> 部分所述的 "
"`OptimisticFallbackIdHandler` 。"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Migration Paths for Topics with Existing v2 Messages"
msgstr "带有现有第 2 版信息的主题的迁移路径"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"For topics that already contain v2 messages, valid migration approaches are:"
msgstr "对于已包含 v2 信息的主题，有效的迁移方法是"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"**Stop and drain:** Stop producers → drain topic completely → upgrade all "
"services → restart with v3 configuration"
msgstr "*停止并排空：* 停止生产者 → 完全排空主题 → 升级所有服务 → 使用 v3 配置重新启动"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"**New topic migration:** Create a new v3 topic and migrate traffic to it"
msgstr "*新主题迁移：* 创建新的 v3 主题并将流量迁移至该主题"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"**Accept transient failures:** Accept transient failures during the "
"switchover period"
msgstr "*接受瞬时故障：* 在切换期间接受瞬时故障"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"**Optimistic fallback handler:** Use the `OptimisticFallbackIdHandler` for "
"gradual migration (see below)"
msgstr "*乐观的回退处理程序：* 使用 `OptimisticFallbackIdHandler` 进行逐步迁移（见下文）"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Optimistic Fallback ID Handler"
msgstr "乐观的回退 ID 处理程序"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"Apicurio Registry provides an `OptimisticFallbackIdHandler` that can help "
"with gradual migration from v2 to v3.\n"
"This handler:"
msgstr ""
"Apicurio Registry 提供了一个 `OptimisticFallbackIdHandler` ，可帮助从 v2 逐步迁移到 v3："

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "**Writes** new messages with 4-byte (v3) IDs"
msgstr "使用 4 字节 (v3) ID *写入* 新报文"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "**Reads** both 4-byte (v3) and 8-byte (v2) IDs"
msgstr "*读取* 4 字节 (v3) 和 8 字节 (v2) ID"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"The `OptimisticFallbackIdHandler` makes the following assumption to "
"distinguish between 4-byte and 8-byte IDs: schema IDs are greater than 0 and "
"smaller than the maximum integer value.\n"
"This is typically true for most use cases, but you should verify your schema "
"IDs meet this constraint before using this handler."
msgstr ""
"`OptimisticFallbackIdHandler` 采用以下假设来区分 4 字节和 8 字节 ID：模式 ID 大于 0 "
"且小于最大整数值。对于大多数用例来说，这通常是正确的，但在使用此处理程序之前，您应该验证您的模式 ID 是否符合这一限制。"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "This approach enables a gradual migration where:"
msgstr "这种方法可以实现逐步迁移："

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"Upgrade consumers first with `OptimisticFallbackIdHandler` (they can read "
"both v2 and v3 messages)"
msgstr "先用 `OptimisticFallbackIdHandler` 升级消费者（他们可以读取 v2 和 v3 信息）"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Then upgrade producers (they start writing v3 format)"
msgstr "然后升级生产者（他们开始编写 v3 格式）"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"Once all v2 messages are consumed, optionally switch to "
"`Default4ByteIdHandler`"
msgstr "所有 v2 报文消耗完毕后，可选择切换到 `Default4ByteIdHandler`"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Compatibility with Apicurio Registry 2.x Server"
msgstr "与 Apicurio Registry 2.x 服务器兼容"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"The Apicurio Registry 3.x client libraries continue to work with Apicurio "
"Registry 2.x servers.\n"
"However, note that Apicurio Registry 2.x is no longer actively maintained."
msgstr ""
"Apicurio Registry 3.x 客户端库仍可与 Apicurio Registry 2.x 服务器一起使用。但请注意，Apicurio "
"Registry 2.x 已停止维护。"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid "Additional Resources"
msgstr "其他资源"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"https://www.apicur.io/registry/docs/apicurio-registry/3.0.x/index."
"html[Apicurio Registry 3.x Documentation]"
msgstr ""
"link:https://www.apicur.io/registry/docs/apicurio-registry/3.0.x/index."
"html[Apicurio Registry 3.x 文档]"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"https://www.apicur.io/registry/docs/apicurio-registry/3.1.x/getting-started/"
"assembly-migrating-registry-v2-v3.html[Apicurio Registry Deployment "
"Migration Guide]"
msgstr ""
"link:https://www.apicur.io/registry/docs/apicurio-registry/3.1.x/getting-"
"started/assembly-migrating-registry-v2-v3.html[Apicurio 注册表部署迁移指南]"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"https://www.apicur.io/blog/2025/03/30/migrate-registry-2-to-3[Official "
"Apicurio Migration Guide]"
msgstr ""
"link:https://www.apicur.io/blog/2025/03/30/migrate-registry-2-to-3[官方 "
"Apicurio 迁移指南]"

#: _guides/_includes/apicurio-registry-v3-migration.adoc
#, fuzzy
msgid ""
"https://www.apicur.io/blog/2025/04/03/evolving-serialization[Apicurio SerDes "
"Evolution Blog Post]"
msgstr ""
"link:https://www.apicur.io/blog/2025/04/03/evolving-serialization[Apicurio "
"SerDes Evolution 博客文章]"
