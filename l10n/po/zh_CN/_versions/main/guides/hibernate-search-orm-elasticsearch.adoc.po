# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2023-10-12 02:10+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. This guide is maintained in the main Quarkus repository
#. and pull requests should be submitted there:
#. https://github.com/quarkusio/quarkus/tree/main/docs/src/main/asciidoc
#. type: Title =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:6
#, no-wrap
msgid "Hibernate Search guide"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:14
msgid "You have a Hibernate ORM-based application? You want to provide a full-featured full-text search to your users? You're at the right place."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:17
msgid "With this guide, you'll learn how to synchronize your entities to an Elasticsearch or OpenSearch cluster in a heartbeat with Hibernate Search.  We will also explore how you can query your Elasticsearch or OpenSearch cluster using the Hibernate Search API."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:18
#, no-wrap
msgid "Prerequisites"
msgstr "先决条件"

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:24
#, no-wrap
msgid "Architecture"
msgstr "应用结构"

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:27
msgid "The application described in this guide allows to manage a (simple) library: you manage authors and their books."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:29
msgid "The entities are stored in a PostgreSQL database and indexed in an Elasticsearch cluster."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:30
#, no-wrap
msgid "Solution"
msgstr "解决方案"

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:34
msgid "We recommend that you follow the instructions in the next sections and create the application step by step.  However, you can go right to the completed example."
msgstr "我们建议您按照下一节的说明逐步创建应用程序。然而，您可以直接转到已完成的示例。"

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:36
msgid "Clone the Git repository: `git clone {quickstarts-clone-url}`, or download an {quickstarts-archive-url}[archive]."
msgstr "克隆 Git 仓库: `git clone {quickstarts-clone-url}` ，或下载一个 {quickstarts-archive-url}[存档] 。"

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:38
msgid "The solution is located in the `hibernate-search-orm-elasticsearch-quickstart` link:{quickstarts-tree-url}/hibernate-search-orm-elasticsearch-quickstart[directory]."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:42
msgid "The provided solution contains a few additional elements such as tests and testing infrastructure."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:44
#, no-wrap
msgid "Creating the Maven project"
msgstr "创建Maven项目"

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:47
msgid "First, we need a new project. Create a new project with the following command:"
msgstr "首先，我们需要一个新的项目。使用以下命令创建一个新的项目:"

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:53
msgid "This command generates a Maven structure importing the following extensions:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:55
msgid "Hibernate ORM with Panache,"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:56
msgid "the PostgreSQL JDBC driver,"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:57
msgid "Hibernate Search + Elasticsearch,"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:58
msgid "RESTEasy Reactive and Jackson."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:61
msgid "If you already have your Quarkus project configured, you can add the `hibernate-search-orm-elasticsearch` extension to your project by running the following command in your project base directory:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:66
msgid "This will add the following to your `pom.xml`:"
msgstr "这将在你的 `pom.xml` 中添加以下内容："

#. type: Block title
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:68
#, no-wrap
msgid "pom.xml"
msgstr "pom.xml"

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:74
#, no-wrap
msgid ""
"<dependency>\n"
"    <groupId>io.quarkus</groupId>\n"
"    <artifactId>quarkus-hibernate-search-orm-elasticsearch</artifactId>\n"
"</dependency>\n"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:77
#, no-wrap
msgid "build.gradle"
msgstr "build.gradle"

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:80
#, no-wrap
msgid "implementation(\"io.quarkus:quarkus-hibernate-search-orm-elasticsearch\")\n"
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:82
#, no-wrap
msgid "Creating the bare entities"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:85
msgid "First, let's create our Hibernate ORM entities `Book` and `Author` in the `model` subpackage."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:89
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:137
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:294
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:336
#, no-wrap
msgid "package org.acme.hibernate.search.elasticsearch.model;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:92
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:339
#, no-wrap
msgid ""
"import java.util.List;\n"
"import java.util.Objects;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:97
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:344
#, no-wrap
msgid ""
"import jakarta.persistence.CascadeType;\n"
"import jakarta.persistence.Entity;\n"
"import jakarta.persistence.FetchType;\n"
"import jakarta.persistence.OneToMany;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:99
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:146
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:306
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:352
#, no-wrap
msgid "import io.quarkus.hibernate.orm.panache.PanacheEntity;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:102
#, no-wrap
msgid ""
"@Entity\n"
"public class Author extends PanacheEntity { // <1>\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:104
#, no-wrap
msgid "    public String firstName;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:106
#, no-wrap
msgid "    public String lastName;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:109
#, no-wrap
msgid ""
"    @OneToMany(mappedBy = \"author\", cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER) // <2>\n"
"    public List<Book> books;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:118
#, no-wrap
msgid ""
"    @Override\n"
"    public boolean equals(Object o) {\n"
"        if (this == o) {\n"
"            return true;\n"
"        }\n"
"        if (!(o instanceof Author)) {\n"
"            return false;\n"
"        }\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:120
#, no-wrap
msgid "        Author other = (Author) o;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:123
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:169
#, no-wrap
msgid ""
"        return Objects.equals(id, other.id);\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:129
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:175
#, no-wrap
msgid ""
"    @Override\n"
"    public int hashCode() {\n"
"        return 31;\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:131
msgid "We are using Hibernate ORM with Panache, it is not mandatory."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:133
msgid "We are loading these elements eagerly so that they are present in the JSON output.  In a real world application, you should probably use a DTO approach."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:139
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:296
#, no-wrap
msgid "import java.util.Objects;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:142
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:299
#, no-wrap
msgid ""
"import jakarta.persistence.Entity;\n"
"import jakarta.persistence.ManyToOne;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:144
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:304
#, no-wrap
msgid "import com.fasterxml.jackson.annotation.JsonIgnore;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:149
#, no-wrap
msgid ""
"@Entity\n"
"public class Book extends PanacheEntity {\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:151
#, no-wrap
msgid "    public String title;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:155
#, no-wrap
msgid ""
"    @ManyToOne\n"
"    @JsonIgnore <1>\n"
"    public Author author;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:164
#, no-wrap
msgid ""
"    @Override\n"
"    public boolean equals(Object o) {\n"
"        if (this == o) {\n"
"            return true;\n"
"        }\n"
"        if (!(o instanceof Book)) {\n"
"            return false;\n"
"        }\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:166
#, no-wrap
msgid "        Book other = (Book) o;\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:177
msgid "We mark this property with `@JsonIgnore` to avoid infinite loops when serializing with Jackson."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:178
#, no-wrap
msgid "Initializing the REST service"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:181
msgid "While everything is not yet set up for our REST service, we can initialize it with the standard CRUD operations we will need."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:183
msgid "Create the `org.acme.hibernate.search.elasticsearch.LibraryResource` class:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:187
#, no-wrap
msgid "package org.acme.hibernate.search.elasticsearch;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:190
#, no-wrap
msgid ""
"import java.util.List;\n"
"import java.util.Optional;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:200
#, no-wrap
msgid ""
"import jakarta.enterprise.event.Observes;\n"
"import jakarta.inject.Inject;\n"
"import jakarta.transaction.Transactional;\n"
"import jakarta.ws.rs.DELETE;\n"
"import jakarta.ws.rs.GET;\n"
"import jakarta.ws.rs.POST;\n"
"import jakarta.ws.rs.PUT;\n"
"import jakarta.ws.rs.Path;\n"
"import jakarta.ws.rs.core.MediaType;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:206
#, no-wrap
msgid ""
"import org.acme.hibernate.search.elasticsearch.model.Author;\n"
"import org.acme.hibernate.search.elasticsearch.model.Book;\n"
"import org.hibernate.search.mapper.orm.session.SearchSession;\n"
"import org.jboss.resteasy.reactive.RestForm;\n"
"import org.jboss.resteasy.reactive.RestQuery;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:208
#, no-wrap
msgid "import io.quarkus.runtime.StartupEvent;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:211
#, no-wrap
msgid ""
"@Path(\"/library\")\n"
"public class LibraryResource {\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:221
#, no-wrap
msgid ""
"    @PUT\n"
"    @Path(\"book\")\n"
"    @Transactional\n"
"    @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\n"
"    public void addBook(@RestForm String title, @RestForm Long authorId) {\n"
"        Author author = Author.findById(authorId);\n"
"        if (author == null) {\n"
"            return;\n"
"        }\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:226
#, no-wrap
msgid ""
"        Book book = new Book();\n"
"        book.title = title;\n"
"        book.author = author;\n"
"        book.persist();\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:230
#, no-wrap
msgid ""
"        author.books.add(book);\n"
"        author.persist();\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:241
#, no-wrap
msgid ""
"    @DELETE\n"
"    @Path(\"book/{id}\")\n"
"    @Transactional\n"
"    public void deleteBook(Long id) {\n"
"        Book book = Book.findById(id);\n"
"        if (book != null) {\n"
"            book.author.books.remove(book);\n"
"            book.delete();\n"
"        }\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:252
#, no-wrap
msgid ""
"    @PUT\n"
"    @Path(\"author\")\n"
"    @Transactional\n"
"    @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\n"
"    public void addAuthor(@RestForm String firstName, @RestForm String lastName) {\n"
"        Author author = new Author();\n"
"        author.firstName = firstName;\n"
"        author.lastName = lastName;\n"
"        author.persist();\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:266
#, no-wrap
msgid ""
"    @POST\n"
"    @Path(\"author/{id}\")\n"
"    @Transactional\n"
"    @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\n"
"    public void updateAuthor(Long id, @RestForm String firstName, @RestForm String lastName) {\n"
"        Author author = Author.findById(id);\n"
"        if (author == null) {\n"
"            return;\n"
"        }\n"
"        author.firstName = firstName;\n"
"        author.lastName = lastName;\n"
"        author.persist();\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:277
#, no-wrap
msgid ""
"    @DELETE\n"
"    @Path(\"author/{id}\")\n"
"    @Transactional\n"
"    public void deleteAuthor(Long id) {\n"
"        Author author = Author.findById(id);\n"
"        if (author != null) {\n"
"            author.delete();\n"
"        }\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:280
msgid "Nothing out of the ordinary here: it is just good old Hibernate ORM with Panache operations in a REST service."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:282
msgid "In fact, the interesting part is that we will need to add very few elements to make our full text search application working."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:283
#, no-wrap
msgid "Using Hibernate Search annotations"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:286
msgid "Let's go back to our entities."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:288
msgid "Enabling full text search capabilities for them is as simple as adding a few annotations."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:290
msgid "Let's edit the `Book` entity again to include this content:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:302
#, no-wrap
msgid ""
"import org.hibernate.search.mapper.pojo.mapping.definition.annotation.FullTextField;\n"
"import org.hibernate.search.mapper.pojo.mapping.definition.annotation.Indexed;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:310
#, no-wrap
msgid ""
"@Entity\n"
"@Indexed // <1>\n"
"public class Book extends PanacheEntity {\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:313
#, no-wrap
msgid ""
"    @FullTextField(analyzer = \"english\") // <2>\n"
"    public String title;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:317
#, no-wrap
msgid ""
"    @ManyToOne\n"
"    @JsonIgnore\n"
"    public Author author;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:320
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:371
#, no-wrap
msgid ""
"    // Preexisting equals()/hashCode() methods\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:322
msgid "First, let's use the `@Indexed` annotation to register our `Book` entity as part of the full text index."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:324
msgid "The `@FullTextField` annotation declares a field in the index specifically tailored for full text search.  In particular, we have to define an analyzer to split and analyze the tokens (~ words) - more on this later."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:326
msgid "Now that our books are indexed, we can do the same for the authors."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:328
msgid "Open the `Author` class and include the content below."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:330
msgid "Things are quite similar here: we use the `@Indexed`, `@FullTextField` and `@KeywordField` annotations."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:332
msgid "There are a few differences/additions though. Let's check them out."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:350
#, no-wrap
msgid ""
"import org.hibernate.search.engine.backend.types.Sortable;\n"
"import org.hibernate.search.mapper.pojo.mapping.definition.annotation.FullTextField;\n"
"import org.hibernate.search.mapper.pojo.mapping.definition.annotation.Indexed;\n"
"import org.hibernate.search.mapper.pojo.mapping.definition.annotation.IndexedEmbedded;\n"
"import org.hibernate.search.mapper.pojo.mapping.definition.annotation.KeywordField;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:356
#, no-wrap
msgid ""
"@Entity\n"
"@Indexed\n"
"public class Author extends PanacheEntity {\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:360
#, no-wrap
msgid ""
"    @FullTextField(analyzer = \"name\") // <1>\n"
"    @KeywordField(name = \"firstName_sort\", sortable = Sortable.YES, normalizer = \"sort\") // <2>\n"
"    public String firstName;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:364
#, no-wrap
msgid ""
"    @FullTextField(analyzer = \"name\")\n"
"    @KeywordField(name = \"lastName_sort\", sortable = Sortable.YES, normalizer = \"sort\")\n"
"    public String lastName;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:368
#, no-wrap
msgid ""
"    @OneToMany(mappedBy = \"author\", cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER)\n"
"    @IndexedEmbedded // <3>\n"
"    public List<Book> books;\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:373
msgid "We use a `@FullTextField` similar to what we did for `Book` but you'll notice that the analyzer is different - more on this later."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:377
msgid "As you can see, we can define several fields for the same property.  Here, we define a `@KeywordField` with a specific name.  The main difference is that a keyword field is not tokenized (the string is kept as one single token) but can be normalized (i.e. filtered) - more on this later.  This field is marked as sortable as our intention is to use it for sorting our authors."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:382
msgid "The purpose of `@IndexedEmbedded` is to include the `Book` fields into the `Author` index.  In this case, we just use the default configuration: all the fields of the associated `Book` entities are included in the index (i.e. the `title` field).  The nice thing with `@IndexedEmbedded` is that it is able to automatically reindex an `Author` if one of its ``Book``s has been updated thanks to the bidirectional relation.  `@IndexedEmbedded` also supports nested documents (using the `storage = NESTED` attribute), but we don't need it here.  You can also specify the fields you want to include in your parent index using the `includePaths` attribute if you don't want them all."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:384
#, no-wrap
msgid "Programmatic mapping"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:390
msgid "If, for some reason, adding Hibernate Search annotations to entities is not possible, mapping can be applied programmatically instead.  Programmatic mapping is configured through the `ProgrammaticMappingConfigurationContext` that is exposed via a mapping configurer (`HibernateOrmSearchMappingConfigurer`)."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:395
msgid "A mapping configurer (`HibernateOrmSearchMappingConfigurer`) allows much more than just programmatic mapping capabilities.  It also allows link:{hibernate-search-docs-url}#mapper-orm-mapping-configurer[configuring annotation mapping, bridges, and more]."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:398
msgid "Below is an example of a mapping configurer that applies programmatic mapping:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:402
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:502
#, no-wrap
msgid "package org.acme.hibernate.search.elasticsearch.config;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:406
#, no-wrap
msgid ""
"import org.hibernate.search.mapper.orm.mapping.HibernateOrmMappingConfigurationContext;\n"
"import org.hibernate.search.mapper.orm.mapping.HibernateOrmSearchMappingConfigurer;\n"
"import org.hibernate.search.mapper.pojo.mapping.definition.programmatic.TypeMappingStep;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:408
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:507
#, no-wrap
msgid "import io.quarkus.hibernate.search.orm.elasticsearch.SearchExtension;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:411
#, no-wrap
msgid ""
"@SearchExtension // <1>\n"
"public class CustomMappingConfigurer implements HibernateOrmSearchMappingConfigurer {\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:422
#, no-wrap
msgid ""
"\t@Override\n"
"    public void configure(HibernateOrmMappingConfigurationContext context) {\n"
"        TypeMappingStep type = context.programmaticMapping()    // <2>\n"
"            .type(SomeIndexedEntity.class);                     // <3>\n"
"        type.indexed()                                          // <4>\n"
"            .index(SomeIndexedEntity.INDEX_NAME);               // <5>\n"
"        type.property(\"id\").documentId();                       // <6>\n"
"        type.property(\"text\").fullTextField();                  // <7>\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:425
msgid "Annotate the configurer implementation with the `@SearchExtension` qualifier to tell Quarkus it should be used by Hibernate Search in the default persistence unit."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:427
msgid "The annotation can also target a specific persistence unit (`@SearchExtension(persistenceUnit = \"nameOfYourPU\")`)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:428
msgid "Access the programmatic mapping context."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:429
msgid "Create mapping step for the `SomeIndexedEntity` entity."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:430
msgid "Define the `SomeIndexedEntity` entity as indexed."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:431
msgid "Provide an index name to be used for the `SomeIndexedEntity` entity."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:432
msgid "Define the document id property."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:433
msgid "Define a full-text search field for the `text` property."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:439
msgid "Alternatively, if for some reason you can't or don't want to annotate your mapping configurer with `@SearchExtension`, you can simply annotate it with `@Dependent @Named(\"myMappingConfigurer\")` and then reference it from configuration properties:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:443
#, no-wrap
msgid "quarkus.hibernate-search-orm.mapping.configurer=bean:myMappingConfigurer\n"
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:446
#, no-wrap
msgid "Analyzers and normalizers"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:448
#, no-wrap
msgid "Introduction"
msgstr "简介"

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:451
msgid "Analysis is a big part of full text search: it defines how text will be processed when indexing or building search queries."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:453
msgid "The role of analyzers is to split the text into tokens (~ words) and filter them (making it all lowercase and removing accents for instance)."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:456
msgid "Normalizers are a special type of analyzers that keeps the input as a single token.  It is especially useful for sorting or indexing keywords."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:458
msgid "There are a lot of bundled analyzers, but you can also develop your own for your own specific purposes."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:460
msgid "You can learn more about the Elasticsearch analysis framework in the https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html[Analysis section of the Elasticsearch documentation]."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:461
#, no-wrap
msgid "Defining the analyzers used"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:465
msgid "When we added the Hibernate Search annotations to our entities, we defined the analyzers and normalizers used.  Typically:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:469
#, no-wrap
msgid "@FullTextField(analyzer = \"english\")\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:474
#, no-wrap
msgid "@FullTextField(analyzer = \"name\")\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:479
#, no-wrap
msgid "@KeywordField(name = \"lastName_sort\", sortable = Sortable.YES, normalizer = \"sort\")\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:482
msgid "We use:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:484
msgid "an analyzer called `name` for person names,"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:485
msgid "an analyzer called `english` for book titles,"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:486
msgid "a normalizer called `sort` for our sort fields"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:488
msgid "but we haven't set them up yet."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:490
msgid "Let's see how you can do it with Hibernate Search."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:492
#, no-wrap
msgid "Setting up the analyzers"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:496
msgid "It is an easy task, we just need to create an implementation of `ElasticsearchAnalysisConfigurer` (and configure Quarkus to use it, more on that later)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:498
msgid "To fulfill our requirements, let's create the following implementation:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:505
#, no-wrap
msgid ""
"import org.hibernate.search.backend.elasticsearch.analysis.ElasticsearchAnalysisConfigurationContext;\n"
"import org.hibernate.search.backend.elasticsearch.analysis.ElasticsearchAnalysisConfigurer;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:510
#, no-wrap
msgid ""
"@SearchExtension // <1>\n"
"public class AnalysisConfigurer implements ElasticsearchAnalysisConfigurer {\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:516
#, no-wrap
msgid ""
"    @Override\n"
"    public void configure(ElasticsearchAnalysisConfigurationContext context) {\n"
"        context.analyzer(\"name\").custom() // <2>\n"
"                .tokenizer(\"standard\")\n"
"                .tokenFilters(\"asciifolding\", \"lowercase\");\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:520
#, no-wrap
msgid ""
"        context.analyzer(\"english\").custom() // <3>\n"
"                .tokenizer(\"standard\")\n"
"                .tokenFilters(\"asciifolding\", \"lowercase\", \"porter_stem\");\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:525
#, no-wrap
msgid ""
"        context.normalizer(\"sort\").custom() // <4>\n"
"                .tokenFilters(\"asciifolding\", \"lowercase\");\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:528
msgid "Annotate the configurer implementation with the `@SearchExtension` qualifier to tell Quarkus it should be used in the default persistence unit, for all Elasticsearch indexes (by default)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:533
msgid "The annotation can also target a specific persistence unit (`@SearchExtension(persistenceUnit = \"nameOfYourPU\")`), backend (`@SearchExtension(backend = \"nameOfYourBackend\")`), index (`@SearchExtension(index = \"nameOfYourIndex\")`), or a combination of those (`@SearchExtension(persistenceUnit = \"nameOfYourPU\", backend = \"nameOfYourBackend\", index = \"nameOfYourIndex\")`)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:535
msgid "This is a simple analyzer separating the words on spaces, removing any non-ASCII characters by its ASCII counterpart (and thus removing accents) and putting everything in lowercase.  It is used in our examples for the author's names."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:537
msgid "We are a bit more aggressive with this one and we include some stemming: we will be able to search for `mystery` and get a result even if the indexed input contains `mysteries`.  It is definitely too aggressive for person names, but it is perfect for the book titles."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:538
msgid "Here is the normalizer used for sorting. Very similar to our first analyzer, except we don't tokenize the words as we want one and only one token."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:544
msgid "Alternatively, if for some reason you can't or don't want to annotate your analysis configurer with `@SearchExtension`, you can simply annotate it with `@Dependent @Named(\"myAnalysisConfigurer\")` and then reference it from configuration properties:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:548
#, no-wrap
msgid "quarkus.hibernate-search-orm.elasticsearch.analysis.configurer=bean:myAnalysisConfigurer\n"
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:551
#, no-wrap
msgid "Adding full text capabilities to our REST service"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:554
msgid "In our existing `LibraryResource`, we just need to inject the `SearchSession`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:559
#, no-wrap
msgid ""
"    @Inject\n"
"    SearchSession searchSession; // <1>\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:564
msgid "Inject a Hibernate Search session, which relies on the `EntityManager` under the hood.  Applications with multiple persistence units can use the CDI qualifier `@io.quarkus.hibernate.orm.PersistenceUnit` to select the right one: see xref:multiple-persistence-units-attaching-cdi[CDI integration]."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:566
msgid "And then we can add the following methods (and a few ``import``s):"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:577
#, no-wrap
msgid ""
"    @Transactional // <1>\n"
"    void onStart(@Observes StartupEvent ev) throws InterruptedException { // <2>\n"
"        // only reindex if we imported some content\n"
"        if (Book.count() > 0) {\n"
"            searchSession.massIndexer()\n"
"                    .startAndWait();\n"
"        }\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:593
#, no-wrap
msgid ""
"    @GET\n"
"    @Path(\"author/search\") // <3>\n"
"    @Transactional\n"
"    public List<Author> searchAuthors(@RestQuery String pattern, // <4>\n"
"            @RestQuery Optional<Integer> size) {\n"
"        return searchSession.search(Author.class) // <5>\n"
"                .where(f ->\n"
"                    pattern == null || pattern.trim().isEmpty() ?\n"
"                        f.matchAll() : // <6>\n"
"                        f.simpleQueryString()\n"
"                                .fields(\"firstName\", \"lastName\", \"books.title\").matching(pattern) // <7>\n"
"                )\n"
"                .sort(f -> f.field(\"lastName_sort\").then().field(\"firstName_sort\")) // <8>\n"
"                .fetchHits(size.orElse(20)); // <9>\n"
"    }\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:595
msgid "Important point: we need a transactional context for these methods."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:600
msgid "As we will import data into the PostgreSQL database using an SQL script, we need to reindex the data at startup.  For this, we use Hibernate Search's mass indexer, which allows to index a lot of data efficiently (you can fine tune it for better performances).  All the upcoming updates coming through Hibernate ORM operations will be synchronized automatically to the full text index.  If you don't import data manually in the database, you don't need that: the mass indexer should then only be used when you change your indexing configuration (adding a new field, changing an analyzer's configuration...) and you want the new configuration to be applied to your existing entities."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:601
msgid "This is where the magic begins: just adding the annotations to our entities makes them available for full text search: we can now query the index using the Hibernate Search DSL."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:602
msgid "Use the `org.jboss.resteasy.reactive.RestQuery` annotation type to avoid repeating the parameter name."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:603
msgid "We indicate that we are searching for ``Author``s."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:604
msgid "We create a predicate: if the pattern is empty, we use a `matchAll()` predicate."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:605
msgid "If we have a valid pattern, we create a https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-simple-query-string-query.html[`simpleQueryString()`] predicate on the `firstName`, `lastName` and `books.title` fields matching our pattern."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:606
msgid "We define the sort order of our results. Here we sort by last name, then by first name. Note that we use the specific fields we created for sorting."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:607
msgid "Fetch the `size` top hits, `20` by default. Obviously, paging is also supported."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:612
msgid "The Hibernate Search DSL supports a significant subset of the Elasticsearch predicates (match, range, nested, phrase, spatial...).  Feel free to explore the DSL using autocompletion."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:615
msgid "When that's not enough, you can always fall back to link:{hibernate-search-docs-url}#search-dsl-predicate-extensions-elasticsearch-from-json[defining a predicate using JSON directly]."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:617
#, no-wrap
msgid "Configuring the application"
msgstr "配置该应用程序"

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:620
msgid "As usual, we can configure everything in the Quarkus configuration file, `application.properties`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:622
msgid "Edit `src/main/resources/application.properties` and inject the following configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:626
#, no-wrap
msgid "quarkus.ssl.native=false <1>\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:628
#, no-wrap
msgid "quarkus.datasource.db-kind=postgresql <2>\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:630
#, no-wrap
msgid "quarkus.hibernate-orm.sql-load-script=import.sql <3>\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:633
#, no-wrap
msgid ""
"quarkus.hibernate-search-orm.elasticsearch.version=8 <4>\n"
"quarkus.hibernate-search-orm.indexing.plan.synchronization.strategy=sync <5>\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:639
#, no-wrap
msgid ""
"%prod.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost/quarkus_test <6>\n"
"%prod.quarkus.datasource.username=quarkus_test\n"
"%prod.quarkus.datasource.password=quarkus_test\n"
"%prod.quarkus.hibernate-orm.database.generation=create\n"
"%prod.hibernate-search-orm.elasticsearch.hosts=localhost:9200 <6>\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:641
msgid "We won't use SSL, so we disable it to have a more compact native executable."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:642
msgid "Let's create a PostgreSQL datasource."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:643
msgid "We load some initial data on startup."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:647
msgid "We need to tell Hibernate Search about the version of Elasticsearch we will use.  It is important because there are significant differences between Elasticsearch mapping syntax depending on the version.  Since the mapping is created at build time to reduce startup time, Hibernate Search cannot connect to the cluster to automatically detect the version.  Note that, for OpenSearch, you need to prefix the version with `opensearch:`; see xref:opensearch[OpenSearch compatibility]."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:650
msgid "This means that we wait for the entities to be searchable before considering a write complete.  On a production setup, the `write-sync` default will provide better performance.  Using `sync` is especially important when testing as you need the entities to be searchable immediately."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:655
msgid "For development and tests, we rely on xref:dev-services[Dev Services], which means Quarkus will start a PostgreSQL database and Elasticsearch cluster automatically.  In production mode, however, you will want to start a PostgreSQL database and Elasticsearch cluster manually, which is why we provide Quarkus with this connection info in the `prod` profile (`%prod.` prefix)."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:662
msgid "Because we rely on xref:dev-services[Dev Services], the database and Elasticsearch schema will automatically be dropped and re-created on each application startup in tests and dev mode (unless link:#quarkus-hibernate-search-orm-elasticsearch_quarkus.hibernate-search-orm.schema-management.strategy[`quarkus.hibernate-search-orm.schema-management.strategy`] is set explicitly)."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:665
msgid "If for some reason you cannot use Dev Services, you will have to set the following properties to get similar behavior:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:672
#, no-wrap
msgid ""
"%dev.quarkus.hibernate-orm.database.generation=drop-and-create\n"
"%test.quarkus.hibernate-orm.database.generation=drop-and-create\n"
"%dev.quarkus.hibernate-search-orm.schema-management.strategy=drop-and-create\n"
"%test.quarkus.hibernate-search-orm.schema-management.strategy=drop-and-create\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:675
msgid "See also link:#quarkus-hibernate-search-orm-elasticsearch_quarkus.hibernate-search-orm.schema-management.strategy[`quarkus.hibernate-search-orm.schema-management.strategy`]."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:680
msgid "For more information about the Hibernate Search extension configuration please refer to the xref:configuration-reference[Configuration Reference]."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:682
#, no-wrap
msgid "Dev Services (Configuration Free Databases)"
msgstr "开发服务（免配置数据库）。"

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:687
msgid "Quarkus supports a feature called Dev Services that allows you to start various containers without any config.  In the case of Elasticsearch this support extends to the default Elasticsearch connection.  What that means practically, is that if you have not configured `quarkus.hibernate-search-orm.elasticsearch.hosts` Quarkus will automatically start an Elasticsearch container when running tests or in xref:dev-mode-differences.adoc[dev mode], and automatically configure the connection."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:691
msgid "When running the production version of the application, the Elasticsearch connection needs to be configured as normal, so if you want to include a production database config in your `application.properties` and continue to use Dev Services we recommend that you use the `%prod.` profile to define your Elasticsearch settings."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:693
msgid "Dev Services for Elasticsearch is currently unable to start multiple clusters concurrently, so it only works with the default backend of the default persistence unit: named persistence units or named backends won't be able to take advantage of Dev Services for Elasticsearch."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:695
msgid "For more information you can read the xref:elasticsearch-dev-services.adoc[Dev Services for Elasticsearch guide]."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:696
#, no-wrap
msgid "Creating a frontend"
msgstr "创建一个网页"

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:702
msgid "Now let's add a simple web page to interact with our `LibraryResource`.  Quarkus automatically serves static resources located under the `META-INF/resources` directory.  In the `src/main/resources/META-INF/resources` directory, overwrite the existing `index.html` file with the content from this {quickstarts-blob-url}/hibernate-search-orm-elasticsearch-quickstart/src/main/resources/META-INF/resources/index.html[index.html] file."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:703
#, no-wrap
msgid "Automatic import script"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:706
msgid "For the purpose of this demonstration, let's import an initial dataset."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:708
msgid "Let's create a `src/main/resources/import.sql` file with the following content:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:714
#, no-wrap
msgid ""
"INSERT INTO author(id, firstname, lastname) VALUES (1, 'John', 'Irving');\n"
"INSERT INTO author(id, firstname, lastname) VALUES (2, 'Paul', 'Auster');\n"
"ALTER SEQUENCE author_seq RESTART WITH 3;\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:729
#, no-wrap
msgid ""
"INSERT INTO book(id, title, author_id) VALUES (1, 'The World According to Garp', 1);\n"
"INSERT INTO book(id, title, author_id) VALUES (2, 'The Hotel New Hampshire', 1);\n"
"INSERT INTO book(id, title, author_id) VALUES (3, 'The Cider House Rules', 1);\n"
"INSERT INTO book(id, title, author_id) VALUES (4, 'A Prayer for Owen Meany', 1);\n"
"INSERT INTO book(id, title, author_id) VALUES (5, 'Last Night in Twisted River', 1);\n"
"INSERT INTO book(id, title, author_id) VALUES (6, 'In One Person', 1);\n"
"INSERT INTO book(id, title, author_id) VALUES (7, 'Avenue of Mysteries', 1);\n"
"INSERT INTO book(id, title, author_id) VALUES (8, 'The New York Trilogy', 2);\n"
"INSERT INTO book(id, title, author_id) VALUES (9, 'Mr. Vertigo', 2);\n"
"INSERT INTO book(id, title, author_id) VALUES (10, 'The Brooklyn Follies', 2);\n"
"INSERT INTO book(id, title, author_id) VALUES (11, 'Invisible', 2);\n"
"INSERT INTO book(id, title, author_id) VALUES (12, 'Sunset Park', 2);\n"
"INSERT INTO book(id, title, author_id) VALUES (13, '4 3 2 1', 2);\n"
"ALTER SEQUENCE book_seq RESTART WITH 14;\n"
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:731
#, no-wrap
msgid "Time to play with your application"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:734
msgid "You can now interact with your REST service:"
msgstr "现在你可以与你的REST服务进行交互："

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:738
msgid "start your Quarkus application with:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:741
msgid "open a browser to `http://localhost:8080/`"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:742
msgid "search for authors or book titles (we initialized some data for you)"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:743
msgid "create new authors and books and search for them too"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:747
msgid "As you can see, all your updates are automatically synchronized to the Elasticsearch cluster."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:749
#, no-wrap
msgid "OpenSearch compatibility"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:754
msgid "Hibernate Search is compatible with both https://www.elastic.co/elasticsearch[Elasticsearch] and https://www.opensearch.org/[OpenSearch], but it assumes it is working with an Elasticsearch cluster by default."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:758
msgid "To have Hibernate Search work with an OpenSearch cluster instead, link:{hibernate-search-docs-url}#backend-elasticsearch-configuration-version[prefix the configured version with `opensearch:`], as shown below."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:762
#, no-wrap
msgid "quarkus.hibernate-search-orm.elasticsearch.version=opensearch:1.2\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:765
msgid "All other configuration options and APIs are exactly the same as with Elasticsearch."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:768
msgid "You can find more information about compatible distributions and versions of Elasticsearch in link:{hibernate-search-docs-url}#compatibility[this section of Hibernate Search's reference documentation]."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:770
#, no-wrap
msgid "Multiple persistence units"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:772
#, no-wrap
msgid "Configuring multiple persistence units"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:777
msgid "With the Hibernate ORM extension, xref:hibernate-orm.adoc#multiple-persistence-units[you can set up multiple persistence units], each with its own datasource and configuration."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:780
msgid "If you do declare multiple persistence units, you will also configure Hibernate Search separately for each persistence unit."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:784
msgid "The properties at the root of the `quarkus.hibernate-search-orm.` namespace define the default persistence unit.  For instance, the following snippet defines a default datasource and a default persistence unit, and sets the Elasticsearch host for that persistence unit to `es1.mycompany.com:9200`."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:789
#, no-wrap
msgid ""
"quarkus.datasource.db-kind=h2\n"
"quarkus.datasource.jdbc.url=jdbc:h2:mem:default;DB_CLOSE_DELAY=-1\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:792
#, no-wrap
msgid ""
"quarkus.hibernate-search-orm.elasticsearch.hosts=es1.mycompany.com:9200\n"
"quarkus.hibernate-search-orm.elasticsearch.version=8\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:795
msgid "Using a map based approach, it is also possible to configure named persistence units:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:800
#, no-wrap
msgid ""
"quarkus.datasource.\"users\".db-kind=h2 <1>\n"
"quarkus.datasource.\"users\".jdbc.url=jdbc:h2:mem:users;DB_CLOSE_DELAY=-1\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:803
#, no-wrap
msgid ""
"quarkus.datasource.\"inventory\".db-kind=h2 <2>\n"
"quarkus.datasource.\"inventory\".jdbc.url=jdbc:h2:mem:inventory;DB_CLOSE_DELAY=-1\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:806
#, no-wrap
msgid ""
"quarkus.hibernate-orm.\"users\".datasource=users <3>\n"
"quarkus.hibernate-orm.\"users\".packages=org.acme.model.user\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:809
#, no-wrap
msgid ""
"quarkus.hibernate-orm.\"inventory\".datasource=inventory <4>\n"
"quarkus.hibernate-orm.\"inventory\".packages=org.acme.model.inventory\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:812
#, no-wrap
msgid ""
"quarkus.hibernate-search-orm.\"users\".elasticsearch.hosts=es1.mycompany.com:9200 <5>\n"
"quarkus.hibernate-search-orm.\"users\".elasticsearch.version=8\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:815
#, no-wrap
msgid ""
"quarkus.hibernate-search-orm.\"inventory\".elasticsearch.hosts=es2.mycompany.com:9200 <6>\n"
"quarkus.hibernate-search-orm.\"inventory\".elasticsearch.version=8\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:817
msgid "Define a datasource named `users`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:818
msgid "Define a datasource named `inventory`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:819
msgid "Define a persistence unit called `users` pointing to the `users` datasource."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:820
msgid "Define a persistence unit called `inventory` pointing to the `inventory` datasource."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:822
msgid "Configure Hibernate Search for the `users` persistence unit, setting the Elasticsearch host for that persistence unit to `es1.mycompany.com:9200`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:824
msgid "Configure Hibernate Search for the `inventory` persistence unit, setting the Elasticsearch host for that persistence unit to `es2.mycompany.com:9200`."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:826
#, no-wrap
msgid "Attaching model classes to persistence units"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:831
msgid "For each persistence unit, Hibernate Search will only consider indexed entities that are attached to that persistence unit.  Entities are attached to a persistence unit by xref:hibernate-orm.adoc#multiple-persistence-units-attaching-model-classes[configuring the Hibernate ORM extension]."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:833
#, no-wrap
msgid "CDI integration"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:836
msgid "You can inject Hibernate Search's main entry points, `SearchSession` and `SearchMapping`, using CDI:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:841
#, no-wrap
msgid ""
"@Inject\n"
"SearchSession searchSession;\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:844
msgid "This will inject the `SearchSession` of the default persistence unit."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:847
msgid "To inject the `SearchSession` of a named persistence unit (`users` in our example), just add a qualifier:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:853
#, no-wrap
msgid ""
"@Inject\n"
"@PersistenceUnit(\"users\") <1>\n"
"SearchSession searchSession;\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:855
msgid "This is the `@io.quarkus.hibernate.orm.PersistenceUnit` annotation."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:857
msgid "You can inject the `SearchMapping` of a named persistence unit using the exact same mechanism:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:863
#, no-wrap
msgid ""
"@Inject\n"
"@PersistenceUnit(\"users\")\n"
"SearchMapping searchMapping;\n"
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:865
#, no-wrap
msgid "Building a native executable"
msgstr "构建一个本地可执行文件"

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:868
msgid "You can build a native executable with the usual command:"
msgstr "你可以使用常用命令构建本机可执行文件："

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:874
msgid "As usual with native executable compilation, this operation consumes a lot of memory."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:876
msgid "It might be safer to stop the two containers while you are building the native executable and start them again once you are done."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:879
msgid "Running it is as simple as executing `./target/hibernate-search-orm-elasticsearch-quickstart-1.0.0-SNAPSHOT-runner`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:881
msgid "You can then point your browser to `http://localhost:8080/` and use your application."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:886
msgid "The startup is a bit slower than usual: it is mostly due to us dropping and recreating the database schema and the Elasticsearch mapping every time at startup.  We also inject some data and execute the mass indexer."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:888
msgid "In a real life application, it is obviously something you won't do at startup."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:891
#, no-wrap
msgid "Offline startup"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:896
msgid "By default, Hibernate Search sends a few requests to the Elasticsearch cluster on startup.  If the Elasticsearch cluster is not necessarily up and running when Hibernate Search starts, this could cause a startup failure."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:898
msgid "To address this, you can configure Hibernate Search to not send any request on startup:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:902
msgid "Disable Elasticsearch version checks on startup by setting the configuration property link:#quarkus-hibernate-search-orm-elasticsearch_quarkus.hibernate-search-orm.elasticsearch.version-check.enabled[`quarkus.hibernate-search-orm.elasticsearch.version-check.enabled`] to `false`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:905
msgid "Disable schema management on startup by setting the configuration property link:#quarkus-hibernate-search-orm-elasticsearch_quarkus.hibernate-search-orm.schema-management.strategy[`quarkus.hibernate-search-orm.schema-management.strategy`] to `none`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:908
msgid "Of course, even with this configuration, Hibernate Search still won't be able to index anything or run search queries until the Elasticsearch cluster becomes accessible."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:914
msgid "If you disable automatic schema creation by setting `quarkus.hibernate-search-orm.schema-management.strategy` to `none`, you will have to create the schema manually at some point before your application starts persisting/updating entities and executing search requests."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:917
msgid "See link:{hibernate-search-docs-url}#schema-management-manager[this section of the reference documentation] for more information."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:920
#, no-wrap
msgid "Coordination through outbox polling"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:925
msgid "Coordination through outbox polling is considered preview."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:931
msgid "In _preview_, backward compatibility and presence in the ecosystem is not guaranteed.  Specific improvements might require changing configuration or APIs, or even storage formats, and plans to become _stable_ are under way.  Feedback is welcome on our https://groups.google.com/d/forum/quarkus-dev[mailing list] or as issues in our https://github.com/quarkusio/quarkus/issues[GitHub issue tracker]."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:936
msgid "While it’s technically possible to use Hibernate Search and Elasticsearch in distributed applications, by default they suffer from link:{hibernate-search-docs-url}#architecture-examples-no-coordination-elasticsearch-pros-and-cons[a few limitations]."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:938
msgid "These limitations are the result of Hibernate Search not coordinating between threads or application nodes by default."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:943
msgid "In order to get rid of these limitations, you can link:{hibernate-search-docs-url}#architecture-examples-outbox-polling-elasticsearch[use the `outbox-polling` coordination strategy].  This strategy creates an outbox table in the database to push entity change events to, and relies on a background processor to consume these events and perform indexing."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:945
msgid "To enable the `outbox-polling` coordination strategy, an additional extension is required:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:952
msgid "Once the extension is there, you will need to explicitly select the `outbox-polling` strategy by setting link:#quarkus-hibernate-search-orm-elasticsearch_quarkus.hibernate-search-orm.coordination.strategy[`quarkus.hibernate-search-orm.coordination.strategy`] to `outbox-polling`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:955
msgid "Finally, you will need to make sure that the Hibernate ORM entities added by Hibernate Search (to represent the outbox and agents) have corresponding tables/sequences in your database:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:959
msgid "If you are just starting with your application and intend to xref:hibernate-orm.adoc#dev-mode[let Hibernate ORM generate your database schema], then no worries: the entities required by Hibernate Search will be included in the generated schema."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:961
msgid "Otherwise, you must link:{hibernate-search-docs-url}#coordination-outbox-polling-schema[manually alter your schema to add the necessary tables/sequences]."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:966
msgid "The database schema Hibernate Search will expect for outbox-polling coordination may be customized through the following configuration properties:"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:968
msgid "link:#quarkus-hibernate-search-orm-coordination-outboxpolling_quarkus.hibernate-search-orm.coordination.entity.mapping.agent.catalog[`quarkus.hibernate-search-orm.coordination.entity.mapping.agent.catalog`]"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:969
msgid "link:#quarkus-hibernate-search-orm-coordination-outboxpolling_quarkus.hibernate-search-orm.coordination.entity.mapping.agent.schema[`quarkus.hibernate-search-orm.coordination.entity.mapping.agent.schema`]"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:970
msgid "link:#quarkus-hibernate-search-orm-coordination-outboxpolling_quarkus.hibernate-search-orm.coordination.entity.mapping.agent.table[`quarkus.hibernate-search-orm.coordination.entity.mapping.agent.table`]"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:971
msgid "link:#quarkus-hibernate-search-orm-coordination-outboxpolling_quarkus.hibernate-search-orm.coordination.entity.mapping.agent.uuid-gen-strategy[`quarkus.hibernate-search-orm.coordination.entity.mapping.agent.uuid-gen-strategy`]"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:972
msgid "link:#quarkus-hibernate-search-orm-coordination-outboxpolling_quarkus.hibernate-search-orm.coordination.entity.mapping.agent.uuid-type[`quarkus.hibernate-search-orm.coordination.entity.mapping.agent.uuid-type`]"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:973
msgid "link:#quarkus-hibernate-search-orm-coordination-outboxpolling_quarkus.hibernate-search-orm.coordination.entity.mapping.outbox-event.catalog[`quarkus.hibernate-search-orm.coordination.entity.mapping.outbox-event.catalog`]"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:974
msgid "link:#quarkus-hibernate-search-orm-coordination-outboxpolling_quarkus.hibernate-search-orm.coordination.entity.mapping.outbox-event.schema[`quarkus.hibernate-search-orm.coordination.entity.mapping.outbox-event.schema`]"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:975
msgid "link:#quarkus-hibernate-search-orm-coordination-outboxpolling_quarkus.hibernate-search-orm.coordination.entity.mapping.outbox-event.table[`quarkus.hibernate-search-orm.coordination.entity.mapping.outbox-event.table`]"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:976
msgid "link:#quarkus-hibernate-search-orm-coordination-outboxpolling_quarkus.hibernate-search-orm.coordination.entity.mapping.outbox-event.uuid-gen-strategy[`quarkus.hibernate-search-orm.coordination.entity.mapping.outbox-event.uuid-gen-strategy`]"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:977
msgid "link:#quarkus-hibernate-search-orm-coordination-outboxpolling_quarkus.hibernate-search-orm.coordination.entity.mapping.outbox-event.uuid-type[`quarkus.hibernate-search-orm.coordination.entity.mapping.outbox-event.uuid-type`]"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:984
msgid "Once you are done with the above, you're ready to use Hibernate Search with an outbox.  Don't change any code, and just start your application: it will automatically detect when multiple applications are connected to the same database, and coordinate the index updates accordingly."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:989
msgid "Hibernate Search mostly behaves the same when using the `outbox-polling` coordination strategy as when not using it: application code (persisting entities, searching, etc.) should not require any change."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:992
msgid "However, there is one key difference: index updates are necessarily asynchronous; they are guaranteed to happen _eventually_, but not immediately."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:997
msgid "This means in particular that the configuration property link:#quarkus-hibernate-search-orm-elasticsearch_quarkus.hibernate-search-orm.indexing.plan.synchronization.strategy[`quarkus.hibernate-search-orm.indexing.plan.synchronization.strategy`] cannot be set when using the `outbox-polling` coordination strategy: Hibernate Search will always behave as if this property was set to `write-sync` (the default)."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1001
msgid "This behavior is consistent with Elasticsearch's https://www.elastic.co/guide/en/elasticsearch/reference/current/near-real-time.html[near-real-time search] and the recommended way of using Hibernate Search even when coordination is disabled."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1005
msgid "For more information about coordination in Hibernate Search, see link:{hibernate-search-docs-url}#coordination[this section of the reference documentation]."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1008
msgid "For more information about configuration options related to coordination, see xref:configuration-reference-coordination-outbox-polling[Configuration of coordination with outbox polling]."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1010
#, no-wrap
msgid "[[configuration-reference-aws]] AWS request signing"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1014
msgid "If you need to use https://docs.aws.amazon.com/elasticsearch-service/[Amazon’s managed Elasticsearch service], you will find it requires a proprietary authentication method involving request signing."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1016
msgid "You can enable AWS request signing in Hibernate Search by adding a dedicated extension to your project and configuring it."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1019
msgid "See link:{hibernate-search-orm-elasticsearch-aws-guide}#aws-configuration-reference[the documentation for the Hibernate Search ORM + Elasticsearch AWS extension] for more information."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1020
#, no-wrap
msgid "Further reading"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1024
msgid "If you are interested in learning more about Hibernate Search 6, the Hibernate team publishes link:{hibernate-search-docs-url}[an extensive reference documentation]."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1025
#, no-wrap
msgid "FAQ"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1027
#, no-wrap
msgid "Why Elasticsearch only?"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1030
msgid "Hibernate Search supports both a Lucene backend and an Elasticsearch backend."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1033
msgid "In the context of Quarkus and to build microservices, we thought the latter would make more sense.  Thus, we focused our efforts on it."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1035
msgid "We don't have plans to support the Lucene backend in Quarkus for now."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1037
#, no-wrap
msgid "Hibernate Search Configuration Reference"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1040
#, no-wrap
msgid "Main Configuration"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1046
#, no-wrap
msgid "About bean references"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1049
msgid "When referencing beans using a string value in configuration properties, that string is parsed."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1051
msgid "Here are the most common formats:"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1054
msgid "`bean:` followed by the name of a `@Named` CDI bean.  For example `bean:myBean`."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1057
msgid "`class:` followed by the fully-qualified name of a class, to be instantiated through CDI if it's a CDI bean, or through its public, no-argument constructor otherwise.  For example `class:com.mycompany.MyClass`."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1061
msgid "An arbitrary string referencing a built-in implementation.  Available values are detailed in the documentation of each configuration property, such as `async`/`read-sync`/`write-sync`/`sync` for xref:quarkus-hibernate-search-orm-elasticsearch_quarkus.hibernate-search-orm.indexing.plan.synchronization.strategy[`quarkus.hibernate-search-orm.indexing.plan.synchronization.strategy`]."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1065
msgid "Other formats are also accepted, but are only useful for advanced use cases.  See link:{hibernate-search-docs-url}#configuration-bean-reference-parsing[this section of Hibernate Search's reference documentation] for more information."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1069
#, no-wrap
msgid "Configuration of coordination with outbox polling"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/hibernate-search-orm-elasticsearch.adoc:1072
msgid "These configuration properties require an additional extension. See xref:coordination[Coordination through outbox polling]."
msgstr ""
